(function(n){function i(t){var i=0,r;return t.each(function(){n(this).css("z-index")>i&&(r=n(this),i=n(this).css("z-index"))}),r}function f(){for(var n="",t=1;t<=10;t++)n+=Math.floor(Math.random()*10)+1;return n}var t=n.ui.dialog.prototype,r="ui-dialog ui-widget ui-widget-content ui-corner-all ",u=function(){var u,h,c;this.originalTitle=this.element.attr("title");typeof this.originalTitle!="string"&&(this.originalTitle="");var t=this,i=t.options,s=i.title||t.originalTitle||"&#160;",o=n.ui.dialog.getTitleId(t.element),e=(t.uiDialog=n("<div><\/div>")).appendTo(document.body).hide().addClass(r+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(r){i.closeOnEscape&&r.keyCode&&r.keyCode===n.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(n){t.moveToTop(!1,n)}),l=t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e),f=(t.uiDialogTitlebar=n("<div><\/div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(e);i.hasClose&&(u=n('<a href="#"><\/a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){u.addClass("ui-state-hover")},function(){u.removeClass("ui-state-hover")}).focus(function(){u.addClass("ui-state-focus")}).blur(function(){u.removeClass("ui-state-focus")}).click(function(n){return t.close(n),!1}).appendTo(f),h=(t.uiDialogTitlebarCloseText=n("<span><\/span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(u));c=n("<span><\/span>").addClass("ui-dialog-title").attr("id",o).html(s).prependTo(f);n.isFunction(i.beforeclose)&&!n.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose);f.find("*").add(f).disableSelection();i.draggable&&n.fn.draggable&&t._makeDraggable();i.resizable&&n.fn.resizable&&t._makeResizable();t._createButtons(i.buttons);t._isOpen=!1;n(".ui-dialog:visible").length==0&&t.uiDialog.hide().fadeIn("normal");n.fn.bgiframe&&e.bgiframe()};t.destroy=function(){var n=this;return n.uiDialog.hide(),n.element.off(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),n.uiDialog.remove(),n.originalTitle&&n.element.attr("title",n.originalTitle),n};t.close=function(){n.hideDialog()};t.open=function(){var u;if(!this._isOpen){var t=this,r=t.options,i=t.uiDialog,f=n(".ui-widget-overlay:visible").length!=0;if(i.next().length&&i.appendTo("body"),t._size(),t._position(r.position),u=i.show(r.show),r.fadeIn&&(f||n(".ui-widget-overlay").hide().fadeIn("normal"),u.hide().fadeIn("normal")),t.moveToTop(!0),r.modal)i.on("keypress.ui-dialog",function(t){if(t.keyCode===n.ui.keyCode.TAB){var i=n(":tabbable",this),r=i.filter(":first"),u=i.filter(":last");if(t.target!==u[0]||t.shiftKey){if(t.target===r[0]&&t.shiftKey)return u.focus(1),!1}else return r.focus(1),!1}});return n(t.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).trigger("focus"),t._trigger("open"),t._isOpen=!0,t}};n.showDialog=function(i,r,e){var s={resizable:!1,draggable:!0,closeOnEscape:!1,moveToTop:!0,title:i,hasClose:!0,fadeIn:!0},o;return n.extend(s,e),s.hasClose||(t._create=u),o=f(),n("#dialogContainer").length==0&&n("body").append("<div id='dialogContainer' class='ui-widget-overlay ui-front' style='z-index: 100;'><\/div>"),n("#dialogContainer").after("<div id='m"+o+"'><p><div id='mp"+o+"'>"+r+"<\/div><\/p><\/div>"),n("#m"+o).dialog(s),n(".ui-widget-overlay").length>1&&n(".ui-widget-overlay:first").remove(),o};n.hideDialog=function(t,r){t=t||"#"+i(n(".ui-dialog")).find(".ui-dialog-content").attr("id");r=r||!0;n(t).parent().addBack().remove();n(".ui-dialog:visible").length===0?r?n(".ui-widget-overlay").fadeOut("normal"):n(".ui-widget-overlay").hide():n(".ui-widget-overlay").css({"z-index":parseInt(i(n(".ui-dialog:visible")).css("z-index"),10)-1});n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){n(document).off(t+".dialog-overlay")})};n.clearDialogs=function(t){t=t||!0;n(".ui-dialog").each(function(){n(this).find(".ui-dialog-content").parent().andSelf().remove()});t?n(".ui-widget-overlay").fadeOut("normal"):n(".ui-widget-overlay").hide();n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){n(document).off(t+".dialog-overlay")})};n.alert=function(t,i){var r;return r=n.extend(r,i,{buttons:{Ok:function(){n.hideDialog(this)}}}),n.showDialog("Info",t,r)};n.confirm=function(t,i,r,u){var f;return f=n.extend(f,u,{buttons:{No:function(){(r||n.noop).call();n.hideDialog(this)},Yes:function(){(i||n.noop).call();n.hideDialog(this)}}}),n.showDialog("Confirm",t,f)}})(jQuery);