<?xml version="1.0" encoding="utf-8" ?>
<!--
This Referential is Spheres F&O/OTCml  compliant only.
It is a consultation of the results being of a cash flows comparison, 
for flows grouped by Contract(Symbol)/Instrument('Put','Call','Future')/Currency/Actor.
the AMI code (Amount Instrument) refers to the CashFlowsInstr IOCompare interface.
Main tables involved : 
 - external datas : EXTLDATADET
 - Internal datas : VW_TRADE_POSETD/VW_ASSET_ETD_EXPANDED/EVENT
-->
<!-- FI 20121106 add ALL_UNMATCH criteria-->
<!-- RD 20160606 [22231] set correct values for ACCOUNTTYPE column-->
<!-- RD 20160613 [22252] set IsHideInDataGrid MATCHSTATUS column-->
<!-- FI 20200820 [25468] dates systemes en UTC -->
<Referentials>
  <Referential>
    <CmptLevel>2.5</CmptLevel>

    <IsUseSQLParameters>true</IsUseSQLParameters>
    <TableName>Cash flows by contract-instrument</TableName>
    <Ressource>IOTRACKCOMPARE</Ressource>
    <ColumnByRow>3</ColumnByRow>
    <Create>false</Create>
    <Modify>false</Modify>
    <Remove>false</Remove>
    <Image>gif/Views.gif</Image>
    <AttachedDoc>false</AttachedDoc>

    <SQLSelect>

      <Command rdbms = "oracle">
        <![CDATA[
        select 
        pl.DTSTPROCESS as DTSTPROCESS_L,
        pl.PROCESS as PROCESS_L, 
        pl.IDSTPROCESS as IDSTPROCESS_L, 
        pl.IDDATA as IDDATAPROCESS_L, 
        pl.IDA,
        pl.HOSTNAME, 
        pl.APPNAME, 
        pl.APPVERSION,
        iot.IDIOTASKDET,
        iot.DATASOURCEIDENT,
        iotc.IDIOTRACK, 
        iotc.MATCHSTATUS,
        iotc.MESSAGE,  
        iotc.INTDATAID,
        iotc.INTDATAIDS,   
        iotc.EXTDATAID,
        edd.DATAROWNUMBER as DATAROWNUMBER,   
        iotc.INTVALUE1 as INTAMT, 
        iotc.EXTVALUE1 as EXTAMT, 
        iotc.MATCHVALUE1 as MATCHAMT, 
        iotc.UNITVALUE1 as UNITAMT, 
        iotc.DTINS, 
        iotc.IDAINS, 
        iotc.ROWVERSION,
        case 
          when iot.DATA3 like '%MRK;%' then '' 
          else posetd.ISO10383_ALPHA4 
        end as MARKET,
        asset.IDC as CURRENCY,
        case 
          when iot.DATA3 like '%ACCT;%' then '' 
          else b.IDENTIFIER 
        end as ACCOUNT,
        case 
          when iot.DATA3 like '%ACCTTYP;%' then ''
          when ar_clearer.IDA is not null then 'Clearer'
          when ar_client.IDA is not null and b.ISPOSKEEPING = 1 then 'Client'
          when b.ISPOSKEEPING = 1 then 'House'					
          else 'Give-up'
        end as ACCOUNTTYPE,
        TO_CHAR(posetd.DTBUSINESS,'YYYY-MM-DD HH24:MI:SS') as DTBUSINESS,
        case 
          when iot.DATA3 like '%SYM;%' then '' 
          else asset.CONTRACTSYMBOL 
        end as CONTRACT,     
        case 
          when iot.DATA3 like '%PUTCALL;%' then ''
          else asset.PUTCALL
        end as PUTCALL         
        from dbo.PROCESS_L pl 
        inner join dbo.IOTRACK iot on (iot.IDPROCESS_L = pl.IDPROCESS_L) and (iot.ELEMENTSUBTYPE = 'CashFlowsInstr')
        inner join dbo.IOTRACKCOMPARE iotc on (iotc.IDIOTRACK = iot.IDIOTRACK) and (iot.IDIOTRACK = %%FOREIGN_KEY%%)
        inner join dbo.VW_TRADE_POSETD posetd on (posetd.IDT = iotc.INTDATAID)
        inner join dbo.VW_ASSET_ETD_EXPANDED asset on (asset.IDASSET = posetd.IDASSET)
        inner join dbo.TRADEACTOR ta on (ta.IDT = posetd.IDT) and (ta.IDA in (posetd.IDA_DEALER, posetd.IDA_CLEARER)) 
          and (ta.IDROLEACTOR='COUNTERPARTY') and (ta.FIXPARTYROLE in ('27', '21', '4'))
        inner join dbo.BOOK b on (((b.IDB = posetd.IDB_DEALER) and (ta.FIXPARTYROLE = '27'))
          or ((b.IDB = posetd.IDB_CLEARER) and (ta.FIXPARTYROLE in ('21', '4')))) 
          and (b.IDENTIFIER = iotc.INTDATAIDS)
        left outer join dbo.ACTOR a_dealer on (a_dealer.IDA = posetd.IDA_DEALER) and (ta.FIXPARTYROLE = '27')
        left outer join dbo.ACTOR a_clearer on ((a_clearer.IDA = posetd.IDA_CLEARER) and (ta.FIXPARTYROLE = '4'))
          or ((a_clearer.IDA = b.IDA) and (ta.FIXPARTYROLE = '21'))
        left outer join dbo.ACTORROLE ar_client on (ar_client.IDA = a_dealer.IDA) and (ar_client.IDROLEACTOR = 'CLIENT')
        left outer join 
        (
          select distinct IDA 
          from dbo.ACTORROLE
          where IDROLEACTOR in ('CLEARER','CCLEARINGCOMPART','HCLEARINGCOMPART','MCLEARINGCOMPART')
        ) ar_clearer on (ar_clearer.IDA = a_clearer.IDA)
        left outer join dbo.EXTLDATADET edd on (edd.IDEXTLDATADET = iotc.EXTDATAID)
                      		
        union all

        select 
        cshflows.DTSTPROCESS_L,
        cshflows.PROCESS_L, 
        cshflows.IDSTPROCESS_L, 
        cshflows.IDDATAPROCESS_L, 
        cshflows.IDA,
        cshflows.HOSTNAME, 
        cshflows.APPNAME, 
        cshflows.APPVERSION,
        cshflows.IDIOTASKDET,
        cshflows.DATASOURCEIDENT,
        cshflows.IDIOTRACK, 
        cshflows.MATCHSTATUS,
        cshflows.MESSAGE,  
        cshflows.INTDATAID,
        cshflows.INTDATAIDS,   
        cshflows.EXTDATAID,  
        cshflows.DATAROWNUMBER,
        cshflows.INTAMT, 
        cshflows.EXTAMT,  
        cshflows.MATCHAMT,
        cshflows.UNITAMT,
        cshflows.DTINS, 
        cshflows.IDAINS, 
        cshflows.ROWVERSION,
        case 
          when cshflows.DATA3 like '%MRK;%' then ''  
          else cshflows.MARKET 
        end as MARKET,
        cshflows.CURRENCY,
        case 
          when cshflows.DATA3 like '%ACCT;%' then '' 
          else cshflows.ACCOUNT 
        end as ACCOUNT,
        case 
          when cshflows.DATA3 like '%ACCTTYP;%' then ''
          when ar_clearer.IDA is not null then 'Clearer'
          when ar_client.IDA is not null and b.ISPOSKEEPING = 1 then 'Client'
          when b.ISPOSKEEPING = 1 then 'House'					
          when b.IDB is not null then 'Give-up'
          else 'n/a'  
        end as ACCOUNTTYPE,
        cshflows.DTBUSINESS,
        case 
          when cshflows.DATA3 like '%SYM;%' then '' 
          else cshflows.CONTRACT 
        end as CONTRACT,
        case 
          when cshflows.DATA3 like '%PUTCALL;%' then '' 
          else cshflows.PUTCALL 
        end as PUTCALL
        from dbo.VW_CASHFLOWSINSTR cshflows
        left outer join dbo.BOOK b on (b.IDENTIFIER = cshflows.ACCOUNT)
        left outer join dbo.ACTOR a on (a.IDA = b.IDA)
        left outer join dbo.ACTORROLE ar_client on (ar_client.IDA = a.IDA) and (ar_client.IDROLEACTOR = 'CLIENT')
        left outer join 
        (
          select distinct IDA 
          from dbo.ACTORROLE
          where IDROLEACTOR in ('CLEARER','CCLEARINGCOMPART','HCLEARINGCOMPART','MCLEARINGCOMPART')
        ) ar_clearer on (ar_clearer.IDA = a.IDA)
        where cshflows.IDIOTRACK = %%FOREIGN_KEY%%
        ]]>
      </Command>

      <Command rdbms = "sqlserver">
        <![CDATA[
        select 
        pl.DTSTPROCESS as DTSTPROCESS_L,
        pl.PROCESS as PROCESS_L, 
        pl.IDSTPROCESS as IDSTPROCESS_L, 
        pl.IDDATA as IDDATAPROCESS_L, 
        pl.IDA,
        pl.HOSTNAME, 
        pl.APPNAME, 
        pl.APPVERSION,
        iot.IDIOTASKDET,
        iot.DATASOURCEIDENT,
        iotc.IDIOTRACK, 
        iotc.MATCHSTATUS,
        iotc.MESSAGE,  
        iotc.INTDATAID,
        iotc.INTDATAIDS,   
        iotc.EXTDATAID,
        edd.DATAROWNUMBER as DATAROWNUMBER,   
        iotc.INTVALUE1 as INTAMT, 
        iotc.EXTVALUE1 as EXTAMT, 
        iotc.MATCHVALUE1 as MATCHAMT, 
        iotc.UNITVALUE1 as UNITAMT, 
        iotc.DTINS, 
        iotc.IDAINS, 
        iotc.ROWVERSION,
        case 
          when iot.DATA3 like '%MRK;%' then '' 
          else posetd.ISO10383_ALPHA4 
        end as MARKET,
        asset.IDC as CURRENCY,
        case 
          when iot.DATA3 like '%ACCT;%' then '' 
          else b.IDENTIFIER 
        end as ACCOUNT,
        case 
          when iot.DATA3 like '%ACCTTYP;%' then ''
          when ar_clearer.IDA is not null then 'Clearer'
          when ar_client.IDA is not null and b.ISPOSKEEPING = 1 then 'Client'
          when b.ISPOSKEEPING = 1 then 'House'					
          else 'Give-up'
        end as ACCOUNTTYPE,
        posetd.DTBUSINESS as DTBUSINESS,
        case 
          when iot.DATA3 like '%SYM;%' then '' 
          else asset.CONTRACTSYMBOL 
        end as CONTRACT,     
        case 
          when iot.DATA3 like '%PUTCALL;%' then ''
          else asset.PUTCALL
        end as PUTCALL
        from dbo.PROCESS_L pl 
        inner join dbo.IOTRACK iot on (iot.IDPROCESS_L = pl.IDPROCESS_L) and (iot.ELEMENTSUBTYPE = 'CashFlowsInstr')
        inner join dbo.IOTRACKCOMPARE iotc on (iotc.IDIOTRACK = iot.IDIOTRACK) and (iot.IDIOTRACK =  %%FOREIGN_KEY%%)
        inner join dbo.VW_TRADE_POSETD posetd on (posetd.IDT = iotc.INTDATAID)
        inner join dbo.VW_ASSET_ETD_EXPANDED asset on (asset.IDASSET = posetd.IDASSET)
        inner join dbo.TRADEACTOR ta on (ta.IDT = posetd.IDT) and (ta.IDA in (posetd.IDA_DEALER, posetd.IDA_CLEARER))
          and (ta.IDROLEACTOR='COUNTERPARTY')
          and (ta.FIXPARTYROLE in ('27', '21', '4'))
        inner join dbo.BOOK b on (((b.IDB = posetd.IDB_DEALER) and (ta.FIXPARTYROLE = '27')) 
          or ((b.IDB = posetd.IDB_CLEARER) and (ta.FIXPARTYROLE in ('21', '4')))) 
          and (b.IDENTIFIER = iotc.INTDATAIDS)
        left outer join dbo.ACTOR a_dealer on (a_dealer.IDA = posetd.IDA_DEALER) and (ta.FIXPARTYROLE = '27')
        left outer join dbo.ACTOR a_clearer on ((a_clearer.IDA = posetd.IDA_CLEARER) and (ta.FIXPARTYROLE = '4'))
          or ((a_clearer.IDA = b.IDA) and (ta.FIXPARTYROLE = '21'))
        left outer join dbo.ACTORROLE ar_client on (ar_client.IDA = a_dealer.IDA) and (ar_client.IDROLEACTOR = 'CLIENT')
        left outer join 
        (
          select distinct IDA 
          from dbo.ACTORROLE
          where IDROLEACTOR in ('CLEARER','CCLEARINGCOMPART','HCLEARINGCOMPART','MCLEARINGCOMPART')
        ) ar_clearer on (ar_clearer.IDA = a_clearer.IDA)
        left outer join dbo.EXTLDATADET edd on (edd.IDEXTLDATADET = iotc.EXTDATAID)

        union all

        select 
        cshflows.DTSTPROCESS_L,
        cshflows.PROCESS_L, 
        cshflows.IDSTPROCESS_L, 
        cshflows.IDDATAPROCESS_L, 
        cshflows.IDA,
        cshflows.HOSTNAME, 
        cshflows.APPNAME, 
        cshflows.APPVERSION,
        cshflows.IDIOTASKDET,
        cshflows.DATASOURCEIDENT,
        cshflows.IDIOTRACK, 
        cshflows.MATCHSTATUS,
        cshflows.MESSAGE,  
        cshflows.INTDATAID,
        cshflows.INTDATAIDS,   
        cshflows.EXTDATAID,  
        cshflows.DATAROWNUMBER,
        cshflows.INTAMT, 
        cshflows.EXTAMT,  
        cshflows.MATCHAMT,
        cshflows.UNITAMT,
        cshflows.DTINS, 
        cshflows.IDAINS, 
        cshflows.ROWVERSION,
        case 
          when cshflows.DATA3 like '%MRK;%' then ''  
          else cshflows.MARKET end
        as MARKET,
        cshflows.CURRENCY,
        case 
          when cshflows.DATA3 like '%ACCT;%' then '' 
          else cshflows.ACCOUNT end
        as ACCOUNT,
        case 
          when cshflows.DATA3 like '%ACCTTYP;%' then ''
          when ar_clearer.IDA is not null then 'Clearer'
          when ar_client.IDA is not null and b.ISPOSKEEPING = 1 then 'Client'
          when b.ISPOSKEEPING = 1 then 'House'					
          when b.IDB is not null then 'Give-up'
          else 'n/a'  
        end as ACCOUNTTYPE,
        cshflows.DTBUSINESS,
        case 
          when cshflows.DATA3 like '%SYM;%' then '' 
          else cshflows.CONTRACT end
        as CONTRACT,
        case 
          when cshflows.DATA3 like '%PUTCALL;%' then '' 
          else cshflows.PUTCALL end
        as PUTCALL
        from dbo.VW_CASHFLOWSINSTR cshflows
        left outer join dbo.BOOK b on (b.IDENTIFIER = cshflows.ACCOUNT)
        left outer join dbo.ACTOR a on (a.IDA = b.IDA)
        left outer join dbo.ACTORROLE ar_client on (ar_client.IDA = a.IDA) and (ar_client.IDROLEACTOR = 'CLIENT')
        left outer join 
        (
          select distinct IDA 
          from dbo.ACTORROLE
          where IDROLEACTOR in ('CLEARER','CCLEARINGCOMPART','HCLEARINGCOMPART','MCLEARINGCOMPART')
        ) ar_clearer on (ar_clearer.IDA = a.IDA)
        where cshflows.IDIOTRACK = %%FOREIGN_KEY%%
      ]]>
      </Command>

    </SQLSelect>

    <SQLWhere>
      <ConditionSystem>SESSIONRESTRICT</ConditionSystem>
      <SQLJoin>%%SR:IOTASK_JOIN%%(IOTASKDET.IDIOTASK)</SQLJoin>
    </SQLWhere>

    <SQLWhere>
      <SQLWhere>
        <![CDATA[
        (tblmain.MATCHSTATUS like 
                              case when @MATCHSTATUS = 'ALL' then 
                                    tblmain.MATCHSTATUS 
                                   when @MATCHSTATUS = 'ALL_UNMATCH' then 
                                    'UNMATCH%' 
                                   else  @MATCHSTATUS end)
        ]]>
      </SQLWhere>
    </SQLWhere>

    <SQLRowStyle type="style">
      <![CDATA[
        case tblmain.MATCHSTATUS
              when 'MATCH' then 'background-color:palegreen'
              when 'UNMATCH_PMTAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_UMGAMT' then 'background-color:#EEF39B'
		          when 'UNMATCH_COLLAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_TAXCOMAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_TAXCOMBRKAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_RMGAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_LOVAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_VRMRGNAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_PRMAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_CALLAMT' then 'background-color:#EEF39B'
              when 'UNMATCH_RPTAMT' then 'background-color:#EEF39B'
		          else 'background-color:lightpink'
		    end
      ]]>
    </SQLRowStyle>


    <Column>
      <ColumnName>PROCESS_L</ColumnName>
      <Ressource>PROCESS_L</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="Process" columnbyrow="4" backcolorheader="status:IDSTPROCESS_L"></html_BLOCK>
    </Column>
    <Column >
      <ColumnName>IDSTPROCESS_L</ColumnName>
      <Ressource>IDSTPROCESS_L</Ressource>
      <DataType>string</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <CellStyle model="status"/>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTSTPROCESS_L</ColumnName>
      <Ressource>DTSTPROCESS_L</Ressource>
      <DataType datakind='Timestamp' tzdbid='Etc/UTC' display='Audit'>datetime</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDDATAPROCESS_L</ColumnName>
      <Ressource>IDDATAPROCESS_L</Ressource>
      <!-- string for left position -->
      <DataType>string</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>IOTASK</TableName>
        <ColumnRelation>
          <ColumnName>IDIOTASK</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDIOTASK</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDA</ColumnName>
      <Ressource>IDA_L</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <!-- IDA=0 on WebSession Process -->
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDA_L</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
      <html_HR size="1"></html_HR>
    </Column>
    <Column>
      <ColumnName>HOSTNAME</ColumnName>
      <Ressource>HOSTNAME_L</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>APPNAME</ColumnName>
      <Ressource>APPNAME_L</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>APPVERSION</ColumnName>
      <Ressource>APPVERSION_L</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <!-- -->
    <Column>
      <ColumnName>IDIOTRACK</ColumnName>
      <Ressource>IDIOTRACK</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="Information_Title" columnbyrow="3" backcolorheader="status:MATCHSTATUS"></html_BLOCK>
      <html_HR title="Source_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>IDIOTASKDET</ColumnName>
      <Ressource>IDIOTASKDET</Ressource>
      <DataType>int</DataType>
      <Colspan>0</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>IOTASKDET</TableName>
        <ColumnRelation>
          <ColumnName>IDIOTASKDET</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDIOELEMENT</ColumnName>
          <Ressource>IDIOELEMENT</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DATASOURCEIDENT</ColumnName>
      <Ressource>DATASOURCEIDENT</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>INTDATAID</ColumnName>
      <Ressource>INTDATAID</Ressource>
      <DataType>int</DataType>
      <Align>Left</Align>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR title="IDSystem_Title"></html_HR>
      <html_HR size="1" title="Internal_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>INTDATAIDS</ColumnName>
      <Ressource>INTDATAID2</Ressource>
      <DataType>string</DataType>
      <Align>Left</Align>
      <Length>30</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>EXTDATAID</ColumnName>
      <Ressource>EXTDATAID</Ressource>
      <DataType>int</DataType>
      <Align>Left</Align>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR size="1" title="External_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>DATAROWNUMBER</ColumnName>
      <Ressource>DATAROWNUMBER</Ressource>
      <DataType>int</DataType>
      <Align>Left</Align>
      <Length>5</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>

    <Column>
      <ColumnName>DTBUSINESS</ColumnName>
      <Ressource>MATCHDTBUSINESS</Ressource>
      <DataType>datetime</DataType>
      <Colspan>0</Colspan>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR title="DtBusiness_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>ACCOUNT</ColumnName>
      <Ressource>ACCOUNT</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR title="Account_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>ACCOUNTTYPE</ColumnName>
      <Ressource>ACCOUNTTYPE_</Ressource>
      <DataType>string</DataType>
      <Length>17</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>CURRENCY</ColumnName>
      <Ressource>MATCHCURRENCY</Ressource>
      <DataType>string</DataType>
      <Length>3</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR title="Currency_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>MARKET</ColumnName>
      <Ressource>MARKET</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
      </Relation>
      <html_HR title="Market_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>CONTRACT</ColumnName>
      <Ressource>CONTRACT</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>PUTCALL</ColumnName>
      <Ressource>COL_PUTCALL</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
      </Relation>
    </Column>

    <Column>
      <ColumnName>UNITAMT</ColumnName>
      <Ressource>UNITAMT</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <IsResource>true</IsResource>
      <Relation>
      </Relation>
      <html_HR title="Amount_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>INTAMT</ColumnName>
      <Ressource>INTAMT_</Ressource>
      <DataType>dec</DataType>
      <Align>Left</Align>
      <Length>9</Length>
      <Scale>2</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <CellStyle model="tradesideLong"/>
      <Relation>
      </Relation>
      <html_HR title="Amount_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>EXTAMT</ColumnName>
      <Ressource>EXTAMT</Ressource>
      <DataType>dec</DataType>
      <Align>Left</Align>
      <Length>9</Length>
      <Scale>2</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <CellStyle model="tradesideLong"/>
      <Relation>
      </Relation>
      <html_HR size="1" title="Empty"></html_HR>
    </Column>
    <Column>
      <ColumnName>MATCHAMT</ColumnName>
      <Ressource>MATCHAMT</Ressource>
      <DataType>dec</DataType>
      <Align>Left</Align>
      <Length>9</Length>
      <Scale>2</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <CellStyle model="tradesideLong"/>
      <Relation>
      </Relation>
      <html_HR title="Result_Title"></html_HR>
    </Column>
    <Column>
      <ColumnName>MATCHSTATUS</ColumnName>
      <Ressource>MATCHSTATUS</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <IsResource>true</IsResource>
      <CellStyle model="status"/>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>MESSAGE</ColumnName>
      <Ressource>MESSAGE</Ressource>
      <DataType>string</DataType>
      <Length>4000</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>

    <Column>
      <ColumnName>IDAINS</ColumnName>
      <Ressource>IDAINS</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>insa</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTINS</ColumnName>
      <Ressource>DTINS</Ressource>
      <DataType datakind='Timestamp' tzdbid='Etc/UTC' display='Audit'>datetime</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>ROWVERSION</ColumnName>
      <Ressource>ROWVERSION</Ressource>
      <DataType>string</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>true</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>

  </Referential>
</Referentials>

