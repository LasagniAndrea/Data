<?xml version="1.0" encoding="utf-8" ?>
<Referentials>
	<Referential>
    <TableName>ACTORACTOR</TableName>
		<Ressource>ACTORACTOR</Ressource>
		<ColumnByRow>2</ColumnByRow>
		<Create>true</Create>
		<Modify>true</Modify>
		<Remove>true</Remove>
		<Image></Image>

		<SQLWhere>
      <!--
      USER non admin peut accéder aux acteurs :                             
      - non affectés à un profil (ou model) et créés ou modifiés par lui-même                     
      - accessibles par application des profils rattachés à lui ou à sa hiérarchie (ISENABLED=true) 
      - dits publics ACTEUR.ISENABLED=true                            
      -->
      <ConditionSystem>SESSIONRESTRICT</ConditionSystem>
      <SQLJoin>left outer join dbo.SESSIONRESTRICT sr on sr.ID=tblmain.IDA and sr.CLASS='ACTOR' and sr.SESSIONID='%%SESSIONID%%'</SQLJoin>
      <SQLWhere>
        <![CDATA[
        (
          (sr.ID is not null) 
          or
          (
            (not exists(select 1 from dbo.ACTORMODEL where IDA=tblmain.IDA)) 
            and
            ((tblmain.IDAINS=%%ID_USER%% and tblmain.IDAUPD is null) or tblmain.IDAUPD=%%ID_USER%%)
          )
        )
        ]]>
      </SQLWhere>
    </SQLWhere>

		<Column>
			<ColumnName>IDA</ColumnName>
			<Ressource>IDA</Ressource>
			<DataType>int</DataType>
			<Colspan>0</Colspan>
			<Length>10</Length>
			<Scale>0</Scale>
			<IsMandatory>true</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>false</IsHide>
			<IsHideInDataGrid>false</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>true</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>false</IsUpdatable>
			<IsOrderBy>true</IsOrderBy>
			<Relation>
				<TableName>ACTOR</TableName>
				<ColumnRelation>
					<ColumnName>IDA</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>IDENTIFIER</ColumnName>
					<Ressource>Actor</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<ColumnLabel>
					<ColumnName>DISPLAYNAME</ColumnName>
					<Ressource>DISPLAYNAME</Ressource>
					<DataType>string</DataType>
				</ColumnLabel>
        <AutoComplete enabled="true"/>
			</Relation>
			<html_BLOCK title="Actor" ></html_BLOCK>
		</Column>
		<Column>
			<ColumnName>IDMODELACTOR</ColumnName>
			<Ressource>IDMODELACTOR</Ressource>
			<DataType>int</DataType>
			<Colspan>0</Colspan>
			<Length>10</Length>
			<Scale>0</Scale>
			<IsMandatory>true</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>false</IsHide>
			<IsHideInDataGrid>false</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>true</IsUpdatable>
			<Relation>
				<TableName>MODELACTOR</TableName>
				<ColumnRelation>
					<ColumnName>IDMODELACTOR</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>MODELNAME</ColumnName>
					<Ressource>MODELNAME</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<ColumnLabel>
					<ColumnName>DESCRIPTION</ColumnName>
					<Ressource>DESCRIPTION</Ressource>
					<DataType>string</DataType>
				</ColumnLabel>
			</Relation>
			<html_BLOCK title="Filtre"></html_BLOCK>
		</Column>
		<Column>
			<ColumnName>IDAINS</ColumnName>
			<Ressource>IDAINS</Ressource>
			<DataType>int</DataType>
			<Length>10</Length>
			<Scale>0</Scale>
			<IsMandatory>true</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>true</IsHide>
			<IsHideInDataGrid>true</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>false</IsUpdatable>
			<Relation>
				<TableName>ACTOR</TableName>
				<AliasTableName>insa</AliasTableName>
				<ColumnRelation>
					<ColumnName>IDA</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>DISPLAYNAME</ColumnName>
					<Ressource>DISPLAYNAME</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<TableName>ACTOR</TableName>
				<ColumnRelation>
					<ColumnName>IDA</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>IDENTIFIER</ColumnName>
					<Ressource>Actor</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<ColumnLabel>
					<ColumnName>DISPLAYNAME</ColumnName>
					<Ressource>DISPLAYNAME</Ressource>
					<DataType>string</DataType>
				</ColumnLabel>
			</Relation>
		</Column>
		<Column>
			<ColumnName>DTINS</ColumnName>
			<Ressource>DTINS</Ressource>
			<DataType>date</DataType>
			<Length>8</Length>
			<Scale>0</Scale>
			<IsMandatory>true</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>true</IsHide>
			<IsHideInDataGrid>true</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>true</IsUpdatable>
			<Relation>
			</Relation>
		</Column>
		<Column>
			<ColumnName>IDAUPD</ColumnName>
			<Ressource>IDAUPD</Ressource>
			<DataType>int</DataType>
			<Length>10</Length>
			<Scale>0</Scale>
			<IsMandatory>false</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>true</IsHide>
			<IsHideInDataGrid>true</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>false</IsUpdatable>
			<Relation>
				<TableName>ACTOR</TableName>
				<AliasTableName>upda</AliasTableName>
				<ColumnRelation>
					<ColumnName>IDA</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>DISPLAYNAME</ColumnName>
					<Ressource>DISPLAYNAME</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<TableName>ACTOR</TableName>
				<ColumnRelation>
					<ColumnName>IDA</ColumnName>
					<DataType>int</DataType>
				</ColumnRelation>
				<ColumnSelect>
					<ColumnName>IDENTIFIER</ColumnName>
					<Ressource>Actor</Ressource>
					<DataType>string</DataType>
				</ColumnSelect>
				<ColumnLabel>
					<ColumnName>DISPLAYNAME</ColumnName>
					<Ressource>DISPLAYNAME</Ressource>
					<DataType>string</DataType>
				</ColumnLabel>
			</Relation>
		</Column>
		<Column>
			<ColumnName>DTUPD</ColumnName>
			<Ressource>DTUPD</Ressource>
			<DataType>date</DataType>
			<Length>8</Length>
			<Scale>0</Scale>
			<IsMandatory>false</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>true</IsHide>
			<IsHideInDataGrid>true</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>true</IsUpdatable>
			<Relation>
			</Relation>
		</Column>
		<Column>
			<ColumnName>EXTLLINK</ColumnName>
			<Ressource>EXTLLINK</Ressource>
			<DataType>string</DataType>
			<Colspan>2</Colspan>
			<Length>128</Length>
			<Scale>0</Scale>
			<IsMandatory>false</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>false</IsHide>
			<IsHideInDataGrid>false</IsHideInDataGrid>
			<IsDataKeyField>false</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>true</IsUpdatable>
			<Relation>
			</Relation>
			<html_BLOCK title="ExtlLink_"></html_BLOCK>
		</Column>
		<Column>
			<ColumnName>ROWVERSION</ColumnName>
			<Ressource>ROWVERSION</Ressource>
			<DataType>string</DataType>
			<Length>8</Length>
			<Scale>0</Scale>
			<IsMandatory>true</IsMandatory>
			<RegularExpression></RegularExpression>
			<Default></Default>
			<IsHide>true</IsHide>
			<IsHideInDataGrid>true</IsHideInDataGrid>
			<IsDataKeyField>true</IsDataKeyField>
			<IsKeyField>false</IsKeyField>
			<IsForeignKeyField>false</IsForeignKeyField>
			<IsIdentity>false</IsIdentity>
			<IsUpdatable>true</IsUpdatable>
			<Relation>
			</Relation>
		</Column>
	</Referential>
</Referentials>

