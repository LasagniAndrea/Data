<?xml version="1.0" encoding="utf-8" ?>
<!--RD 20170605 [23007] Rajouter une condition sur le rï¿½le de l'acteur-->
<Referentials>
  <Referential>
    <TableName>ASSETRATING</TableName>
    <Ressource>ASSETRATING</Ressource>
    <ColumnByRow>2</ColumnByRow>
    <Create>true</Create>
    <Modify>true</Modify>
    <Remove>true</Remove>
    <Image></Image>


    <SQLWhere>
      <!-- join for limited resultset to current assetcategory and ratingcode -->
      <SQLJoin>
        inner join dbo.VW_ASSET vw_1 on
        (
        vw_1.ASSETCATEGORY=tblmain.ASSETCATEGORY
        and vw_1.IDASSET=tblmain.IDASSETREF
        and vw_1.ID=vw_2.ID
        and vw_1.ASSETCATEGORY = '%%PARAM1%%'
        )
        inner join dbo.ENUM rv on
        (
        rv.CODE=tblmain.RATINGCODE
        and rv.CODE=rv2.CODE
        and rv.VALUE=rv2.VALUE
        )
      </SQLJoin>
    </SQLWhere>
   
    <Column>
      <ColumnName>IDA</ColumnName>
      <Ressource>IDA</Ressource>
      <DataType>int</DataType>
      <Colspan>0</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <IsAutoPostBack>true</IsAutoPostBack>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>a1</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Actor</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <Condition>
          <TableName>ACTORROLE</TableName>
          <ColumnRelation>
            <ColumnName>IDA</ColumnName>
            <DataType>int</DataType>
          </ColumnRelation>
          <SQLWhere>
            ACTORROLE.IDROLEACTOR in ('CUSTODIAN')
            and ACTORROLE.IDA in (select IDA from dbo.CUSTODIAN)
          </SQLWhere>
        </Condition>
        <AutoComplete enabled="true"/>
      </Relation>
      <html_BLOCK title="Identification" columnbyrow="2" ></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>ASSETCATEGORY</ColumnName>
      <Ressource>ASSETCATEGORY</Ressource>
      <DataType>string</DataType>
      <Colspan>1</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default>
        <Value>%%PARAM1%%</Value>
      </Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <IsAutoPostBack>true</IsAutoPostBack>
      <Relation>
        <!--<DDLType>underlyingasset_rating</DDLType>-->
      </Relation>
      <html_BLOCK title="Rating_Title" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>IDASSETREF</ColumnName>
      <Ressource>IDASSETREF</Ressource>
      <DataType>int</DataType>
      <Colspan>2</Colspan>
      <InputWidth>300%</InputWidth>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
        <TableName>VW_ASSET</TableName>
        <AliasTableName>vw_2</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDASSET</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER_DISPLAYNAME</ColumnName>
          <Ressource>IDASSET</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>ASSETCATEGORY='%%PARAM1%%'</SQLWhere>
        </Condition>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>
    <Column>
      <ColumnName>RATINGCODE</ColumnName>
      <Ressource>RATINGCODE</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsAutoPostBack>true</IsAutoPostBack>
      <Relation>
        <TableName>ENUMS</TableName>
        <AliasTableName>rc</AliasTableName>
        <ColumnRelation>
          <ColumnName>CODE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>CODE</ColumnName>
          <Ressource>RATINGCODE</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition>
          <SQLWhere>
            CODE in (select case '%%PARAM1%%'
            when 'Commodity' then cust.COMMODITYRATINGCODE
            when 'EquityAsset' then cust.EQUITYRATINGCODE
            when 'Future' then cust.FUTURERATINGCODE
            when 'Index' then cust.INDEXRATINGCODE
            when 'FxRateAsset' then cust.FXRATERATINGCODE
            else null end
            from dbo.CUSTODIAN cust 
            where cust.IDA=%%COLUMN_VALUE%%IDA%%)
          </SQLWhere>
        </Condition>
      </Relation>
      <html_HR></html_HR>
    </Column>
    <Column>
      <ColumnName>RATINGVALUE</ColumnName>
      <Ressource>RATINGVALUE</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>rv2</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>RATINGVALUE</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition>
          <SQLWhere>(CODE = '%%COLUMN_VALUE%%RATINGCODE%%')</SQLWhere>
        </Condition>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTENABLED</ColumnName>
      <Ressource>DTENABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default>
        <Value>today</Value>
      </Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="Status" blockbyrow="2" width="25%" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>DTDISABLED</ColumnName>
      <Ressource>DTDISABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDAINS</ColumnName>
      <Ressource>IDAINS</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>insa</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTINS</ColumnName>
      <Ressource>DTINS</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDAUPD</ColumnName>
      <Ressource>IDAUPD</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>upda</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTUPD</ColumnName>
      <Ressource>DTUPD</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>EXTLLINK</ColumnName>
      <Ressource>EXTLLINK</Ressource>
      <DataType>string</DataType>
      <Length>128</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="ExtlLink_" blockbyrow="2" width="75%" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>ROWATTRIBUT</ColumnName>
      <Ressource>ROWATTRIBUT</Ressource>
      <DataType>string</DataType>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>ROWVERSION</ColumnName>
      <Ressource>ROWVERSION</Ressource>
      <DataType>string</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>true</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
  </Referential>
</Referentials>
<!-- Sample -->
<!-- <html_BLOCK title="Sample" blockbyrow="2" width="75%" columnbyrow="1"></html_BLOCK> -->
<!-- <html_HR title="Sample"></html_HR> -->
<!-- <Information> -->
<!-- <Type>information|warning</Type> -->
<!-- <ToolTipMessage|PopupMessage|LabelMessage> -->
<!-- Message... -->
<!-- </ToolTipMessage|PopupMessage|LabelMessage> -->
<!-- </Information> -->
