<?xml version="1.0" encoding="utf-8" ?>
<Referentials>
  <Referential>
    <!-- FI 20210219 [XXXXX] Add -->
    <!-- FI 20230929 [WI716] La colonne IDA est désormais en AutoPostBack puisque le chargement des traders est complexe
        Le fichier partytemplate.js est conservé mais n'est plus utilisé
    -->
    <!--<JQuery function="Init"/>-->
    <!-- CC/PL 20171018 [23519] Column IDA_TRADER - Display algorithm with role EXECUTION -->
    <IsUseSQLParameters>true</IsUseSQLParameters>
    <TableName>PARTYTEMPLATE</TableName>
    <Ressource>PARTYTEMPLATE</Ressource>
    <ColumnByRow>3</ColumnByRow>
    <Create>true</Create>
    <Modify>true</Modify>
    <Remove>true</Remove>
    <Image></Image>

    <!--CC 20100726 Add SessionRestrict for MARKET, INSTRUMENT and ACTOR -->
    <SQLWhere>
      <ConditionSystem>SESSIONRESTRICT</ConditionSystem>
      <SQLJoin>%%SR:ACTOR_JOIN%%(sra1,tblmain.IDA)</SQLJoin>
      <SQLJoin>%%SR:ACTOR_JOIN%%(sra2,tblmain.IDA_ENTITY)</SQLJoin>
      <SQLJoin>%%SR:INSTR_JOIN%%(tblmain.IDI)</SQLJoin>
      <SQLJoin>left outer join dbo.SESSIONRESTRICT sra3 on sra3.ID=tblmain.IDA_TRADER and sra3.CLASS='ACTOR' and sra3.SESSIONID=@SR_SESSIONID</SQLJoin>
      <SQLJoin>left outer join dbo.SESSIONRESTRICT srm on srm.ID=tblmain.IDM and srm.CLASS='MARKET' and srm.SESSIONID=@SR_SESSIONID</SQLJoin>
      <SQLWhere>
        (
        ((tblmain.IDA_TRADER is null) or (sra3.ID is not null))
        and
        ((tblmain.IDM is null) or (srm.ID is not null))
        )
      </SQLWhere>
    </SQLWhere>

    <Column>
      <ColumnName>IDPARTYTEMPLATE</ColumnName>
      <Ressource>IDPARTYTEMPLATE</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>true</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>true</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="Identification" columnbyrow="3" ></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>IDA</ColumnName>
      <Ressource>IDA</Ressource>
      <DataType>int</DataType>
      <Colspan>0</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsAutoPostBack>true</IsAutoPostBack>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>a1</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Actor</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <Condition>
          <TableName>ACTORROLE</TableName>
          <ColumnRelation>
            <ColumnName>IDA</ColumnName>
            <DataType>int</DataType>
          </ColumnRelation>
          <SQLWhere>ACTORROLE.IDROLEACTOR in ('COUNTERPARTY')</SQLWhere>
        </Condition>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDA_ENTITY</ColumnName>
      <Ressource>IDA_ENTITY</Ressource>
      <DataType>int</DataType>
      <Colspan>3</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsAutoPostBack>false</IsAutoPostBack>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>a2</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDA_ENTITY</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <Condition>
          <TableName>VW_BOOK_VIEWER</TableName>
          <ColumnRelation>
            <ColumnName>IDA_ENTITY</ColumnName>
            <DataType>int</DataType>
          </ColumnRelation>
          <SQLWhere>(VW_BOOK_VIEWER.FK = %%COLUMN_VALUE%%IDA%%)</SQLWhere>
        </Condition>
        <AutoComplete enabled="false"/>
      </Relation>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_IDA_ENTITYForPARTYTEMPLATE</LabelMessage>
      </Information>
      <html_BLOCK title="EnvironmentContext_Title" columnbyrow="3"></html_BLOCK>
    </Column>
    <!-- FI 20230927 [XXXXX][WI714] IDI nullable -->
    <Column>
      <ColumnName>IDI</ColumnName>
      <Ressource>IDI</Ressource>
      <DataType>int</DataType>
      <Colspan>3</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsAutoPostBack>false</IsAutoPostBack>
      <Relation>
        <TableName>INSTRUMENT</TableName>
        <ColumnRelation>
          <ColumnName>IDI</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Instrument</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <Condition>
          <SQLWhere>
            IDP in (select IDP from dbo.PRODUCT where GPRODUCT not in('ADM','ASSET','RISK'))
          </SQLWhere>
        </Condition>
        <AutoComplete enabled="true"/>
      </Relation>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_IDIForPARTYTEMPLATE</LabelMessage>
      </Information>
    </Column>
    <Column>
      <ColumnName>IDM</ColumnName>
      <Ressource>IDM</Ressource>
      <DataType>int</DataType>
      <Colspan>3</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <!-- CC 20130506 Harmonization of  display of market-->
        <TableName>VW_MARKET_IDENTIFIER</TableName>
        <AliasTableName>mk</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDM</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>SHORT_ACRONYM</ColumnName>
          <Ressource>IDM_SHORT_ACRONYM</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <AutoComplete enabled="true"/>
      </Relation>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_IDMForPARTYTEMPLATE</LabelMessage>
      </Information>
    </Column>
    <Column>
      <ColumnName>IDB</ColumnName>
      <Ressource>IDB</Ressource>
      <DataType>int</DataType>
      <Colspan>3</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>BOOK</TableName>
        <TableNameForDDL>VW_BOOK_VIEWER</TableNameForDDL>
        <AliasTableName>b1</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDB</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Book</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <Condition>
          <!-- PL/FI 20170504 mise en commentaire -->
          <!--<SQLWhere>(tblmain.FK = %%COLUMN_VALUE%%IDA%%) and (tblmain.IDA_ENTITY = %%COLUMN_VALUE%%IDA_ENTITY%%)</SQLWhere>-->
          <SQLWhere>(tblmain.FK = %%COLUMN_VALUE%%IDA%%)</SQLWhere>
        </Condition>
      </Relation>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_IDBForPARTYTEMPLATE</LabelMessage>
      </Information>
      <html_BLOCK title="DefaultValues_Title" columnbyrow="3"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>IDA_TRADER</ColumnName>
      <Ressource>IDA_TRADER</Ressource>
      <DataType>int</DataType>
      <Colspan>3</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <DDLType>PARTYTEMPLATE_TRADER.[IDA:%%COLUMN_VALUE%%IDA%%]</DDLType>
        <TableName>ACTOR</TableName>
        <AliasTableName>a3</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDA_TRADER</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_IDA_TRADERForPARTYTEMPLATE</LabelMessage>
      </Information>
    </Column>
    
    <Column>
      <ColumnName>DTENABLED</ColumnName>
      <Ressource>DTENABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default>
        <Value>today</Value>
      </Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="Status" blockbyrow="2" width="25%" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>DTDISABLED</ColumnName>
      <Ressource>DTDISABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDAINS</ColumnName>
      <Ressource>IDAINS</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>insa</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTINS</ColumnName>
      <Ressource>DTINS</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDAUPD</ColumnName>
      <Ressource>IDAUPD</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>upda</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTUPD</ColumnName>
      <Ressource>DTUPD</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>EXTLLINK</ColumnName>
      <Ressource>EXTLLINK</Ressource>
      <DataType>string</DataType>
      <Length>128</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
      <html_BLOCK title="ExtlLink_" blockbyrow="2" width="75%" columnbyrow="1"></html_BLOCK>
    </Column>
    -->
    <Column>
      <ColumnName>ROWATTRIBUT</ColumnName>
      <Ressource>ROWATTRIBUT</Ressource>
      <DataType>string</DataType>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>ROWVERSION</ColumnName>
      <Ressource>ROWVERSION</Ressource>
      <DataType>string</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
  </Referential>
</Referentials>
<!-- Sample -->
<!-- <html_BLOCK title="Sample" blockbyrow="2" width="75%" columnbyrow="1"></html_BLOCK> -->
<!-- <html_HR title="Sample"></html_HR> -->
<!-- <Information> -->
<!-- <Type>information|warning</Type> -->
<!-- <ToolTipMessage|PopupMessage|LabelMessage> -->
<!-- Message... -->
<!-- </ToolTipMessage|PopupMessage|LabelMessage> -->
<!-- </Information> -->
