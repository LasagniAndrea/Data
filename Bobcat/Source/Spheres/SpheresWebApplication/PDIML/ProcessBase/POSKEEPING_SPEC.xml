<?xml version="1.0" encoding="utf-8" ?>
<!-- 
CC/PL 20151029 [21494] Modify length of column QTY
FI 20120102 [] mise en place des mots clefs %%SR SESSIONRESTRICT 
FI 20140403 [XXXXX] Tuning
PM 20150520 [20575] Replace em.DTMARKET with em.DTENTITY
RD 20170315 [22967] Ajouter la colonne GPRODUCT        
RD 20180104 [23701] Ajouter la colonne TZFACILITY   
EG 20191115 [25077] RDBMS : New version of Trades tables architecture (TRADESTSYS merge to TRADE, NEW TABLE TRADEXML)
EG 20200226 [25077] RDBMS : New version of Trades tables architecture (TRADEINSTRUMENT (INSTRUMENTNO=1) to TRADE)
FI 20200323 [XXXXX] RDBMS : Suppression d'une jointure non nécessaire
-->
<Referentials>
  <Referential>
    <IsUseSQLParameters>true</IsUseSQLParameters>
    <TableName>CLEARINGSPEC</TableName>
    <AliasTableName>pk</AliasTableName>
    <Ressource>ClearingSpecific</Ressource>
    <ColumnByRow>3</ColumnByRow>
    <Create>false</Create>
    <Modify>false</Modify>
    <Remove>false</Remove>
    <LoadOnStart>false</LoadOnStart>
    <Notepad>false</Notepad>
    <AttachedDoc>false</AttachedDoc>
    <IsLoupe>false</IsLoupe>
    <IsDblClick>false</IsDblClick>

    <SQLSelect>
      <Command rdbms = "all">
        <![CDATA[
          select 
          result.IDA_CSSCUSTODIAN, a_csscust.IDENTIFIER as CSSCUSTODIAN_IDENTIFIER, 
          result.IDEM, entity.IDENTIFIER as ENTITY_IDENTIFIER, mk.SHORT_ACRONYM as MARKET,
          result.IDA_DEALER, result.IDB_DEALER, result.IDA_CLEARER, result.IDB_CLEARER, result.IDA_ENTITYCLEARER, 
          /*--DEALER--*/
          dealer.IDENTIFIER as DEALER_IDENTIFIER,dealer.DISPLAYNAME as DEALER_DISPLAYNAME,
          bdealer.IDENTIFIER as DEALER_BOOKIDENTIFIER,
          /*--CLEARER--*/
          clearer.IDENTIFIER as CLEARER_IDENTIFIER, clearer.DISPLAYNAME as CLEARER_DISPLAYNAME,
          bclearer.IDENTIFIER as CLEARER_BOOKIDENTIFIER,
          /*--TRADE--*/
          result.IDT, result.DTBUSINESS, result.DTEXECUTION, result.TZFACILITY, result.PRICE,
          result.AVAILABLEQTY, result.SIDE,
          result.CLOSABLEQTY, result.POSITIONEFFECT, result.EXECUTIONID, result.ORDERID, result.ORDERTYPE,
          result.ISCUSTODIAN, convert(varchar, result.IDT) as DATAKEYFIELD,
          result.GPRODUCT
          
          from
          (
	        select 
          tr.IDA_CSSCUSTODIAN, 
          tr.IDEM, tr.IDM, tr.IDA_ENTITYDEALER, tr.IDA_DEALER, tr.IDB_DEALER, tr.IDA_CLEARER, tr.IDB_CLEARER, tr.IDA_ENTITYCLEARER,
          tr.IDT, tr.DTBUSINESS, tr.DTEXECUTION, tr.TZFACILITY, tr.PRICE, tr.SIDE, 
          tr.QTY - isnull(pab.QTY,0) - isnull(pas.QTY,0) as AVAILABLEQTY,
          /*cast(0 as bigint) as CLOSABLEQTY*/ 0 as CLOSABLEQTY , tr.POSITIONEFFECT, tr.EXECUTIONID, tr.ORDERID, tr.ORDERTYPE, tr.ISCUSTODIAN,
          tr.GPRODUCT
          from dbo.VW_TRADE_FUNGIBLE tr
          %%SR:TRADE_JOIN%%(tr.IDT, tr)
          
          inner join dbo.VW_TRADE_FUNGIBLE trsource on (trsource.IDT = @IDT) and 
            (trsource.IDI = tr.IDI) and 
            (trsource.IDASSET = tr.IDASSET) and 
            (trsource.IDA_DEALER = tr.IDA_DEALER) and 
            (trsource.IDB_DEALER = tr.IDB_DEALER) and 
            (trsource.IDA_CLEARER = tr.IDA_CLEARER) and 
            (trsource.IDB_CLEARER = tr.IDB_CLEARER) and 
            (trsource.SIDE != tr.SIDE)

          left outer join (   
              select pad.IDT_BUY as IDT, sum(pad.QTY) as QTY
              from dbo.POSACTION pa
              inner join dbo.POSACTIONDET pad on (pad.IDPA = pa.IDPA)
              inner join dbo.TRADE tr on (tr.IDT = pad.IDT_BUY)
              inner join dbo.VW_ENTITYMARKET_ACTIVITY em on (em.IDA = tr.IDA_ENTITY) and (em.IDM = tr.IDM) and (em.IDA_CSSCUSTODIAN = tr.IDA_CSSCUSTODIAN)
              where (pa.DTBUSINESS <= em.DTENTITY) and (pad.DTCAN is null or (pad.DTCAN > em.DTENTITY))
              group by pad.IDT_BUY
          ) pab  on (pab.IDT = tr.IDT)

          left join (
            select pad.IDT_SELL as IDT, sum(pad.QTY) as QTY
            from dbo.POSACTION pa
            inner join dbo.POSACTIONDET pad on (pad.IDPA = pa.IDPA)
            inner join dbo.TRADE tr on (tr.IDT = pad.IDT_SELL)
            inner join dbo.VW_ENTITYMARKET_ACTIVITY em on (em.IDA = tr.IDA_ENTITY) and (em.IDM = tr.IDM) and (em.IDA_CSSCUSTODIAN = tr.IDA_CSSCUSTODIAN)            
            where (pa.DTBUSINESS <= em.DTENTITY) and (pad.DTCAN is null or (pad.DTCAN > em.DTENTITY))
            group by pad.IDT_SELL
          ) pas  on (pas.IDT = tr.IDT)
          
          where 
            (tr.IDSTENVIRONMENT = 'REGULAR') and                   
            (tr.DTTRADE <= tr.DTENTITY) and
            (tr.DTBUSINESS <= tr.DTENTITY) and
            (tr.POSKEEPBOOK_DEALER = 1) and
            (tr.QTY - isnull(pab.QTY,0) - isnull(pas.QTY,0) > 0) and 
            (%%SR:TRADE_WHERE_PREDICATE%%)
          ) result
          inner join dbo.ACTOR entity            on entity.IDA = result.IDA_ENTITYDEALER
          inner join dbo.VW_MARKET_IDENTIFIER mk on mk.IDM = result.IDM
          inner join dbo.ACTOR dealer            on dealer.IDA = result.IDA_DEALER
          inner join dbo.BOOK  bdealer           on bdealer.IDB = result.IDB_DEALER
          inner join dbo.ACTOR clearer           on clearer.IDA = result.IDA_CLEARER
          inner join dbo.BOOK  bclearer          on bclearer.IDB = result.IDB_CLEARER
          inner join dbo.ACTOR a_csscust         on (a_csscust.IDA = result.IDA_CSSCUSTODIAN)
      ]]>
      </Command>
    </SQLSelect>

    
    <SQLCheckSelectedDefaultValue>0</SQLCheckSelectedDefaultValue>

    <Column>
      <ColumnName>DATAKEYFIELD</ColumnName>
      <Ressource>DATAKEYFIELD</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>true</IsDataKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDEM</ColumnName>
      <Ressource>IDEM</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>ENTITY_IDENTIFIER</ColumnName>
      <Ressource>COL_Entity</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>MARKET</ColumnName>
      <Ressource>COL_Market</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDA_DEALER</ColumnName>
      <Ressource>COL_Dealer</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDB_DEALER</ColumnName>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DEALER_IDENTIFIER</ColumnName>
      <Ressource>COL_Dealer</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DEALER_BOOKIDENTIFIER</ColumnName>
      <Ressource>COL_BookDealer</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>true</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DEALER_DISPLAYNAME</ColumnName>
      <Ressource>COL_ActorDealer</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDT</ColumnName>
      <Ressource>ConcernedTrade</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
        <TableName>TRADE</TableName>
        <ColumnRelation>
          <ColumnName>IDT</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>ConcernedTrade</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>

    <Column>
      <ColumnName>DTBUSINESS</ColumnName>
      <Ressource>DTBUSINESS_</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    
    <Column>
      <ColumnName>DTEXECUTION</ColumnName> 
      <Ressource>COL_DTEXECUTION</Ressource>
      <DataType datakind='Timestamp' tzdbid='Etc/UTC' display='Trading'>datetime</DataType>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>TZFACILITY</ColumnName>
      <Ressource>TZFACILITY</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>PRICE</ColumnName>
      <Ressource>COL_Price_</Ressource>
      <DataType>decimal</DataType>
      <!--<Scale>4</Scale>-->
      <Scale>6</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>CLOSABLEQTY</ColumnName>
      <Ressource>ClearingQty</Ressource>
      <DataType>int</DataType>
      <Length>15</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsEditable>true</IsEditable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>SIDE</ColumnName>
      <Ressource>AVAILABLEQTY</Ressource>
      <DataType>string</DataType>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsResource>true</IsResource>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>sidecode</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>AVAILABLEQTY</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='SideEnum'</SQLWhere>
        </Condition>
      </Relation>
    </Column>

    <Column>
      <ColumnName>AVAILABLEQTY</ColumnName>
      <DataType>int</DataType>
      <Length>15</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>      
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>POSITIONEFFECT</ColumnName>
      <Ressource>COL_PositionEffect</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>poseffect</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>COL_PositionEffect</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='PositionEffectEnum'</SQLWhere>
        </Condition>
      </Relation>
    </Column>

    <Column>
      <ColumnName>EXECUTIONID</ColumnName>
      <Ressource>COL_ExecutionID</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>ORDERID</ColumnName>
      <Ressource>COL_OrderID</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>ORDERTYPE</ColumnName>
      <Ressource>COL_OrderType</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>ordType</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>COL_OrderType</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='OrdTypeEnum'</SQLWhere>
        </Condition>
        <!--<DDLType>enum.[code:OrdTypeEnum;]</DDLType>-->
      </Relation>
    </Column>

    <Column>
      <ColumnName>IDA_CLEARER</ColumnName>
      <Ressource>COL_Clearer</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>IDB_CLEARER</ColumnName>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CLEARER_IDENTIFIER</ColumnName>
      <Ressource>COL_Clearer</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CLEARER_BOOKIDENTIFIER</ColumnName>
      <Ressource>COL_BookClearer</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CLEARER_DISPLAYNAME</ColumnName>
      <Ressource>COL_ActorClearer</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDA_ENTITYCLEARER</ColumnName>
      <Ressource>Entity</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <!-- CSSCUSTODIAN -->
    <Column>
      <ColumnName>IDA_CSSCUSTODIAN</ColumnName>
      <Ressource>IDA_CSSCUSTODIAN</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CSSCUSTODIAN_IDENTIFIER</ColumnName>
      <Ressource>CssCustodian</Ressource>
      <DataType>string</DataType>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_CSSCUSTODIAN">true</IsHyperLink>
    </Column>
    <Column>
      <ColumnName>ISCUSTODIAN</ColumnName>
      <Ressource>SEE_CUSTODIAN</Ressource>
      <DataType>bool</DataType>
      <Colspan>0</Colspan>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsVirtualColumn>true</IsVirtualColumn>
    </Column>
    <Column>
      <ColumnName>GPRODUCT</ColumnName>
      <Ressource>GPRODUCT</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation/>
    </Column>
  </Referential>
</Referentials>
