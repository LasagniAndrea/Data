<?xml version="1.0" encoding="utf-8" ?>
<!--
CC/PL 20151029 [21494] Modify length of column QTY
RD 20130205 [18388] Ne pas calculer des frais automatiques pour les Futures livrés suite à Exercice/Assignation d'Option
PM 20150602 [20575] Replace em.DTMARKET with em.DTENTITY
RD 20180112 [23721] Ajouter la colonne TZFACILITY
EG 20191115 [25077] RDBMS : New version of Trades tables architecture (TRADESTSYS merge to TRADE, NEW TABLE TRADEXML)
-->
<Referentials>
  <Referential>
    <IsUseSQLParameters>true</IsUseSQLParameters>
    <TableName>FEESCALCULATION</TableName>
    <AliasTableName>tr</AliasTableName>
    <freezeColumn>8</freezeColumn>
    <!-- CC 20121008 Comment ressource below. Cause: duplicate ressource. Solution: using ressource for menu -->
    <!--<Ressource>FeesCalculation</Ressource>-->
    <ColumnByRow>3</ColumnByRow>
    <Create>false</Create>
    <Modify>false</Modify>
    <Remove>false</Remove>
    <LoadOnStart>false</LoadOnStart>
    <Notepad>false</Notepad>
    <AttachedDoc>false</AttachedDoc>
    <IsLoupe>false</IsLoupe>
    <IsDblClick>false</IsDblClick>

    <SQLSelect>
      <Command rdbms = "all">
        <![CDATA[select 
          result.IDA_ENTITY, a_entity.IDENTIFIER as ENTITY_IDENTIFIER, a_entity.DISPLAYNAME as ENTITY_DISPLAYNAME, 
          result.IDA_CSSCUSTODIAN, csscust.IDENTIFIER as CSSCUSTODIAN_IDENTIFIER, 
          m.SHORT_ACRONYM as MARKET, result.DTENTITY, result.IDEM, result.IDI, result.IDASSET, result.ASSETCATEGORY, result.IDM,
          result.IDA_DEALER, result.IDB_DEALER, result.IDA_CLEARER, result.IDB_CLEARER, result.IDA_ENTITYCLEARER, 
          /*-- TRADE --*/
          result.IDT, result.IDENTIFIER, result.DTBUSINESS, result.DTEXECUTION, result.TZFACILITY, result.PRICE,
          result.QTY, result.SIDE, result.POSITIONEFFECT, result.EXECUTIONID, result.ORDERID, result.ORDERTYPE,
          /*--DEALER--*/
          dealer.IDENTIFIER as DEALER_IDENTIFIER,dealer.DISPLAYNAME as DEALER_DISPLAYNAME,
          bdealer.IDENTIFIER as DEALER_BOOKIDENTIFIER,bdealer.ISPOSKEEPING,
          /*--CLEARER--*/
          clearer.IDENTIFIER as CLEARER_IDENTIFIER, clearer.DISPLAYNAME as CLEARER_DISPLAYNAME,
          bclearer.IDENTIFIER as CLEARER_BOOKIDENTIFIER,
          /*--TRADE IDENTIFIER--*/
          null as TRADE_IDENTIFIER,
          /*--ASSET--*/          
          asset.ASSETCATEGORY as CATEGORY, asset.IDENTIFIER as ASSET_IDENTIFIER, asset.CHARACTERISTICS,
          /*--GPRODUCT--*/          
          result.GPRODUCT
          from
          (
	          <choose>
              <when test="{FEESCALCULATIONMODE}='ALL' or {FEESCALCULATIONMODE}='STL'">
                  select tr.IDM, tr.DTENTITY, tr.DTBUSINESS, tr.IDI, tr.IDASSET, tr.IDEM, tr.IDA_CSSCUSTODIAN, tr.IDA_ENTITYDEALER as IDA_ENTITY,
                  tr.IDA_DEALER, tr.IDB_DEALER, tr.IDA_CLEARER, tr.IDB_CLEARER, tr.IDA_ENTITYCLEARER, tr.ASSETCATEGORY,
                  tr.IDT, tr.IDENTIFIER, tr.GPRODUCT,
                  tr.DTEXECUTION, tr.TZFACILITY, tr.PRICE,
                  tr.QTY, tr.SIDE, tr.POSITIONEFFECT, tr.EXECUTIONID, tr.ORDERID, tr.ORDERTYPE
                  from dbo.VW_TRADE_ALLOC tr
                  %%SR:TRADEALLOC_JOIN%%(tr.IDT,tr,tr)
                  where
                  (
                   (tr.DTBUSINESS = tr.DTENTITY) and (tr.DTENTITY between @DATE1 and @DATE2)
                   and (isnull(tr.TRDTYPE,0) not in (%%R:EXCLUDEDVALUESFORFEES%%))
                    <choose>
                        <when test="{ENTITY}>-1"> and tr.IDA_ENTITY=@ENTITY </when>
                    </choose>
                    <choose>
                        <when test="{CSSCUSTODIAN}>0"> and tr.IDA_CSSCUSTODIAN=@CSSCUSTODIAN </when>
                        <when test="{CSSCUSTODIAN}=-1"> and (1=1) </when>
                        <otherwise> and tr.CSSCUSTODIAN=@CSSCUSTODIAN </otherwise>
                    </choose>
                    and (%%SR:TRADEALLOC_WHERE_PREDICATE%%)
                  )
              </when>
            </choose>
            <choose>
              <when test="{FEESCALCULATIONMODE}='ALL'">
                union
              </when>
            </choose>  
            <choose>
              <when test="{FEESCALCULATIONMODE}='ALL' or {FEESCALCULATIONMODE}='INV'">
                  select tr.IDM, tr.DTENTITY, tr.DTBUSINESS, tr.IDI, tr.IDASSET, tr.IDEM, tr.IDA_CSSCUSTODIAN, tr.IDA_ENTITYDEALER as IDA_ENTITY,
                  tr.IDA_DEALER, tr.IDB_DEALER, tr.IDA_CLEARER, tr.IDB_CLEARER, tr.IDA_ENTITYCLEARER, tr.ASSETCATEGORY,
                  tr.IDT, tr.IDENTIFIER, tr.GPRODUCT,
                  tr.DTEXECUTION, tr.TZFACILITY, tr.PRICE,
                  tr.QTY, tr.SIDE, tr.POSITIONEFFECT, tr.EXECUTIONID, tr.ORDERID, tr.ORDERTYPE
                  from dbo.VW_TRADE_ALLOC tr
                  %%SR:TRADEALLOC_JOIN%%(tr.IDT,tr,tr)
                  where
                  (
                   (tr.DTBUSINESS between @DATE1 and @DATE2)
                   and (isnull(tr.TRDTYPE,0) not in (%%R:EXCLUDEDVALUESFORFEES%%))
                   and not exists (select 1 from dbo.TRADELINK tl
				                           inner join dbo.TRADE tr_A on  (tr_A.IDT = tl.IDT_A) and (tr_A.IDSTACTIVATION != 'DEACTIV')
				                           where tl.IDT_B = tr.IDT and  tl.LINK = 'Invoice')
                    <choose>
                        <when test="{ENTITY}>-1"> and tr.IDA_ENTITY=@ENTITY </when>
                    </choose>
                    <choose>
                        <when test="{CSSCUSTODIAN}>0"> and tr.IDA_CSSCUSTODIAN=@CSSCUSTODIAN </when>
                        <when test="{CSSCUSTODIAN}=-1"> and (1=1) </when>
                        <otherwise> and tr.CSSCUSTODIAN=@CSSCUSTODIAN </otherwise>
                    </choose>
                    and (%%SR:TRADEALLOC_WHERE_PREDICATE%%)
                  )
              </when>
            </choose>  
          ) result         
          inner join dbo.VW_MARKET_IDENTIFIER m  on (m.IDM=result.IDM)        
          inner join dbo.ACTOR dealer            on (dealer.IDA = result.IDA_DEALER)
          inner join dbo.BOOK  bdealer           on (bdealer.IDB = result.IDB_DEALER)
          inner join dbo.ACTOR clearer           on (clearer.IDA = result.IDA_CLEARER)
          inner join dbo.BOOK  bclearer          on (bclearer.IDB = result.IDB_CLEARER)
          inner join dbo.VW_ASSET_CONSULT asset  on (asset.IDASSET = result.IDASSET) and (asset.ASSETCATEGORY = result.ASSETCATEGORY)
          inner join dbo.ACTOR a_entity          on (a_entity.IDA=result.IDA_ENTITY)
          inner join dbo.ACTOR csscust           on (csscust.IDA=result.IDA_CSSCUSTODIAN)
      ]]>
      </Command>
    </SQLSelect>

    <!-- ENTITY -->
    <Column>
      <ColumnName>IDA_ENTITY</ColumnName>
      <Ressource>Entity</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>ENTITY_IDENTIFIER</ColumnName>
      <Ressource>COL_EntityDealer</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_ENTITY" condition="ENTITY" linktable="ACTOR" name="IDENTIFIER">true</IsHyperLink>
    </Column>
    <Column>
      <ColumnName>ENTITY_DISPLAYNAME</ColumnName>
      <Ressource></Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_ENTITY" condition="ENTITY" linktable="ACTOR" name="DISPLAYNAME">false</IsHyperLink>
    </Column>
    
    <!-- CLEARING HOUSE -->
    <Column>
      <ColumnName>IDA_CSSCUSTODIAN</ColumnName>
      <Ressource>IDA_CSSCUSTODIAN</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CSSCUSTODIAN_IDENTIFIER</ColumnName>
      <Ressource>CssCustodian</Ressource>
      <DataType>string</DataType>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_CSSCUSTODIAN" condition="CSS|CUSTODIAN" linktable="ACTOR" name="IDENTIFIER">true</IsHyperLink>
    </Column>

    <!-- IDM -->
    <Column>
      <ColumnName>IDM</ColumnName>
      <Ressource>COL_Market</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>MARKET</ColumnName>
      <Ressource>COL_Market</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>true</IsOrderBy>
      <IsHyperLink linktype="column" type="IDM" data="IDM" linktable="VW_MARKET_IDENTIFIER" name="SHORT_ACRONYM">true</IsHyperLink>
    </Column>

    <!-- DTBUSINESS -->
    <Column>
      <ColumnName>DTBUSINESS</ColumnName>
      <Ressource>DTBUSINESS_</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <!-- ASSET -->
    <Column>
      <ColumnName>ASSETCATEGORY</ColumnName>
      <Ressource>ASSETCATEGORY</Ressource>
      <DataType>string</DataType>
      <Colspan>2</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>ASSET_IDENTIFIER</ColumnName>
      <Ressource>IdAsset</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDASSET" data="IDASSET" linktable="VW_ASSET" name="IDENTIFIER">false</IsHyperLink>
      <html_HR size="1"></html_HR>
    </Column>
    <Column>
      <ColumnName>CHARACTERISTICS</ColumnName>
      <Ressource>Asset_Title</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDASSET" data="IDASSET">true</IsHyperLink>
    </Column>

    <!-- DEALER -->
    <Column>
      <ColumnName>IDA_DEALER</ColumnName>
      <Ressource>COL_Dealer</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>IDB_DEALER</ColumnName>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DEALER_BOOKIDENTIFIER</ColumnName>
      <Ressource>COL_BookDealer</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>true</IsOrderBy>
      <IsHyperLink linktype="column" type="IDB" data="IDB_DEALER" linktable="BOOK" name="IDENTIFIER">true</IsHyperLink>
    </Column>
    <Column>
      <ColumnName>ISPOSKEEPING</ColumnName>
      <Ressource>ISPOSKEEPING2</Ressource>
      <DataType>bool</DataType>
      <Colspan>0</Colspan>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DEALER_IDENTIFIER</ColumnName>
      <Ressource>COL_Dealer</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsHyperLink linktype="column" type="IDA" data="IDA_DEALER" linktable="ACTOR" name="IDENTIFIER">true</IsHyperLink>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DEALER_DISPLAYNAME</ColumnName>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_DEALER" linktable="ACTOR" name="DISPLAYNAME">false</IsHyperLink>
    </Column>

    <!-- CLEARER -->
    <Column>
      <ColumnName>IDA_CLEARER</ColumnName>
      <Ressource>COL_Clearer</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>IDB_CLEARER</ColumnName>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>CLEARER_BOOKIDENTIFIER</ColumnName>
      <Ressource>COL_BookClearer</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDB" data="IDB_CLEARER" linktable="BOOK" name="IDENTIFIER">true</IsHyperLink>
    </Column>
    <Column>
      <ColumnName>CLEARER_IDENTIFIER</ColumnName>
      <Ressource>Clearing</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_CLEARER" condition="CSS|CLEARER" linktable="ACTOR" name="IDENTIFIER">true</IsHyperLink>
    </Column>
    <Column>
      <ColumnName>CLEARER_DISPLAYNAME</ColumnName>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsHyperLink linktype="column" type="IDA" data="IDA_CLEARER" condition="CSS|CLEARER" linktable="ACTOR" name="DISPLAYNAME">false</IsHyperLink>
    </Column>

    <Column>
      <ColumnName>IDI</ColumnName>
      <Ressource>IDI</Ressource>
      <Colspan>0</Colspan>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression/>
      <Default/>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>INSTRUMENT</TableName>
        <AliasTableName>ns</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDI</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Instrument</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>

    <Column>
      <ColumnName>GPRODUCT</ColumnName>
      <Ressource>GPRODUCT</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>32</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <Relation></Relation>
    </Column>
    
    <Column>
      <ColumnName>IDASSET</ColumnName>
      <Ressource>IDASSET</Ressource>
      <DataType>int</DataType>
      <Colspan>0</Colspan>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDA_ENTITYCLEARER</ColumnName>
      <Ressource>Entity</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDEM</ColumnName>
      <Ressource>IDEM</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>TRADE_IDENTIFIER</ColumnName>
      <Ressource>Trade</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <!-- Laisser cet colonne avant IDT -->
    <Column>
      <ColumnName>IDENTIFIER</ColumnName>
      <Ressource>Trade</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDT</ColumnName>
      <Ressource>Trade</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>true</IsOrderBy>
      <Relation>
        <TableName>TRADE</TableName>
        <AliasTableName>xx</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDT</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Trade</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>

    <Column>
      <ColumnName>DTEXECUTION</ColumnName>
      <Ressource>COL_DTEXECUTION</Ressource>
      <DataType datakind='Timestamp' tzdbid='Etc/UTC' display='Trading'>datetime</DataType>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>TZFACILITY</ColumnName>
      <Ressource>TZFACILITY</Ressource>
      <DataType>string</DataType>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>PRICE</ColumnName>
      <Ressource>COL_Price_</Ressource>
      <DataType>decimal</DataType>
      <!--<Scale>4</Scale>-->
      <Scale>6</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>SIDE</ColumnName>
      <Ressource>QTY</Ressource>
      <DataType>string</DataType>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <IsResource>true</IsResource>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>sidecode</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>INITIALQTY_</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='SideEnum'</SQLWhere>
        </Condition>
      </Relation>
    </Column>

    <Column>
      <ColumnName>QTY</ColumnName>
      <DataType>decimal</DataType>
      <Length>20</Length>
      <Scale>3</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>POSITIONEFFECT</ColumnName>
      <Ressource>COL_PositionEffect</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>poseffect</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>COL_PositionEffect</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='PositionEffectEnum'</SQLWhere>
        </Condition>
      </Relation>
    </Column>

    <Column>
      <ColumnName>EXECUTIONID</ColumnName>
      <Ressource>COL_ExecutionID</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>ORDERID</ColumnName>
      <Ressource>COL_OrderID</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>false</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>ORDERTYPE</ColumnName>
      <Ressource>COL_OrderType</Ressource>
      <DataType>string</DataType>
      <Nowrap>true</Nowrap>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ENUM</TableName>
        <AliasTableName>ordType</AliasTableName>
        <ColumnRelation>
          <ColumnName>VALUE</ColumnName>
          <DataType>string</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>EXTVALUE</ColumnName>
          <Ressource>COL_OrderType</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <Condition apply="ALL">
          <SQLWhere>CODE='OrdTypeEnum'</SQLWhere>
        </Condition>
      </Relation>
    </Column>
  </Referential>
</Referentials>
