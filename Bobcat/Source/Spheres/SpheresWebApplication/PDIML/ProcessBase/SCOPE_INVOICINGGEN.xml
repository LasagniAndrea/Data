<?xml version="1.0" encoding="utf-8" ?>
<!-- FI 20120119 [] mise de IsUseSQLParameters -->
<!-- PL 201200830 Use Except/Minus, Add filter on TRADE.DTTRADE, Comment EVENTFEE, Check on last 3 months instead of last 2 months -->
<!-- FI 20120927 [] add hyperlink on column IDENTIFIER-->
<!-- EG 20141020 [20442] Introduction IDDC, IDGCONTRACT -->
<!-- EG 20191115 [25077] RDBMS : New version of Trades tables architecture (TRADESTSYS merge to TRADE, NEW TABLE TRADEXML)-->
<!-- EG 20200226 [25077] RDBMS : New version of Trades tables architecture (TRADEINSTRUMENT (INSTRUMENTNO=1) to TRADE)-->
<Referentials>
	<Referential>
    <IsUseSQLParameters>true</IsUseSQLParameters>
		<TableName>EVENT</TableName>
		<AliasTableName>e</AliasTableName>
		<Ressource>EVENT</Ressource>
		<ColumnByRow>3</ColumnByRow>
		<Create>false</Create>
		<Modify>false</Modify>
		<Remove>false</Remove>
		<Notepad>false</Notepad>
    <Timeout>30</Timeout>
    
    <SQLSelect>
      <Command rdbms = "oracle">
        <![CDATA[select 
        ev.IDT, ev.IDE, ev.EVENTCODE, ev.EVENTTYPE, ev.IDA_PAY, ev.IDB_PAY, ev.IDA_REC, ev.IDB_REC, ev.VALORISATION, ev.UNIT, ev.EXTLLINK, 
        ec.DTEVENT,
        ar_payer.IDA as IDA_INVOICED,
        t.IDENTIFIER as IDENTIFIER, t.IDI, t.DTTRADE, t.DTEXECUTION, t.IDM,
        p.GPRODUCT, p.IDP, 
        ig.IDGINSTR, ci.CONTRACT_IDENTIFIER, 
        mg.IDGMARKET,
        bg_payer.IDGBOOK
        from 
        (
	        select e.IDE, ec.IDEC
	        from dbo.EVENT e
	        inner join dbo.EVENTCLASS ec on (ec.IDE = e.IDE) and (ec.EVENTCLASS = 'INV')
                                       and (ec.DTEVENT >= add_months(@DATE1,-3)) and (ec.DTEVENT <= @DATE1) 
                                       
	        /* Search and check Invoiced Office of Payer */
          
	        inner join dbo.BOOK b_payer on (b_payer.IDB = e.IDB_PAY)
	        inner join dbo.ACTORROLE ar_payer on (ar_payer.IDA = b_payer.IDA_INVOICEDOFFICE) and (ar_payer.IDROLEACTOR = 'INVOICINGOFFICE')
          
	        /* Check Entity of Receiver (see also where) */
          
	        left outer join dbo.BOOK b_receiver on (b_receiver.IDB = e.IDB_REC) and (b_receiver.IDA_ENTITY = @ENTITY)
          
          /* Check if date is EOM */
          where add_months(@DATE1,1)-to_number(to_char(add_months(@DATE1,1),'DD')) = @DATE1
	        and (e.IDSTACTIVATION = 'REGULAR')
          and ( (nvl(b_receiver.IDA_ENTITY,e.IDA_REC) = @ENTITY) or (nvl(b_payer.IDA_ENTITY,e.IDA_PAY) = @ENTITY))
          
          /* ---------------------------------------------------------------- */
          minus
          /* ---------------------------------------------------------------- */
          
	        /* EventSource: Fees already invoiced on a valid invoice  */
          
	        select e_inv.IDE_SOURCE, ec.IDEC
	        from dbo.TRADE t_inv
	        inner join dbo.INSTRUMENT i_inv on (i_inv.IDI = t_inv.IDI)
	        inner join dbo.PRODUCT p_inv on (p_inv.IDP = i_inv.IDP) and (p_inv.GPRODUCT = 'ADM')
	        inner join dbo.EVENT e_inv on (e_inv.IDT = t_inv.IDT) 
	        inner join dbo.EVENTCLASS ec on (ec.IDE = e_inv.IDE_SOURCE) and (ec.EVENTCLASS = 'INV')
                                       and (ec.DTEVENT> = add_months(@DATE1,-3)) and (ec.DTEVENT <= @DATE1) 
          where t_inv.DTTRADE >= add_months(@DATE1,-4) and (t_inv.IDSTENVIRONMENT = 'REGULAR')
        ) e_candidate
        
        inner join dbo.EVENT ev on (ev.IDE = e_candidate.IDE)
        inner join dbo.EVENTCLASS ec on (ec.IDEC = e_candidate.IDEC)
        
        /* Invoiced Office of Payer */
        
        inner join dbo.BOOK b_payer on (b_payer.IDB = ev.IDB_PAY)
        inner join dbo.ACTORROLE ar_payer on (ar_payer.IDA = b_payer.IDA_INVOICEDOFFICE) and (ar_payer.IDROLEACTOR = 'INVOICINGOFFICE')
        
        /* Trade */
        
        inner join dbo.TRADE t on (t.IDT = ev.IDT)
        %%SR:TRADE_JOIN%%(t.IDT, t)
        
        inner join dbo.INSTRUMENT i on (i.IDI = t.IDI)
        inner join dbo.PRODUCT p on (p.IDP = i.IDP)
        left outer join dbo.VW_MARKET_IDENTIFIER mk on (mk.IDM = t.IDM)        
        
        /* Groupe Instruments */
        left outer join dbo.VW_GINSTRROLE ig on (ig.IDI = t.IDI) and (ig.IDROLEGINSTR = 'INVOICING') and (ig.IDA = ar_payer.IDA)

        /* Groupe Contract */
		    left outer join dbo.VW_CONTRACT_INVOICE ci on (ci.IDASSET = t.IDASSET) and (ci.ASSETCATEGORY = t.ASSETCATEGORY)
		    left outer join dbo.VW_CONTRACTG_INVOICE cg on (cg.IDASSET = t.IDASSET) and (cg.ASSETCATEGORY = t.ASSETCATEGORY) and (cg.IDA = ar_payer.IDA)
       
        /* Groupe Market */
        left outer join dbo.VW_GMARKETROLE mg on (mg.IDM = t.IDM) and (mg.IDROLEGMARKET = 'INVOICING') and (mg.IDA = ar_payer.IDA)
        
        /* BookG */
        left outer join dbo.VW_GBOOKROLE bg_payer on (bg_payer.IDB = ev.IDB_PAY) and (bg_payer.IDROLEGBOOK = 'INVOICING') and (bg_payer.IDA = ar_payer.IDA)


        /* Restriction */
        where (%%SR:TRADE_WHERE_PREDICATE%%)
        ]]>
      </Command>
      <Command rdbms = "sqlserver">
        <![CDATA[
				/* Spheres:Hint ARITHABORT_ON NOPARAMS */
        select 
				ev.IDT, ev.IDE, ev.EVENTCODE, ev.EVENTTYPE, ev.IDA_PAY, ev.IDB_PAY, ev.IDA_REC, ev.IDB_REC, ev.VALORISATION, ev.UNIT, ev.EXTLLINK, 
				ec.DTEVENT,
        ar_payer.IDA as IDA_INVOICED, 
        t.IDENTIFIER as IDENTIFIER, t.IDI, t.DTTRADE, t.DTEXECUTION, t.IDM,
				p.GPRODUCT, p.IDP, 
        ig.IDGINSTR, 
				cg.IDGCONTRACT, ci.CONTRACT_IDENTIFIER,
				mg.IDGMARKET, 
        bg_payer.IDGBOOK 

				from 
				(
					select e.IDE, ec.IDEC
					from dbo.EVENT e
					inner join dbo.EVENTCLASS ec on (ec.IDE=e.IDE) and (ec.EVENTCLASS='INV') and 
                                          (ec.DTEVENT>=dateadd(MONTH,-3,@DATE1)) and (ec.DTEVENT<=@DATE1) 
                                          
					/* Search and check Invoiced Office of Payer */
          
					inner join dbo.BOOK b_payer on (b_payer.IDB = e.IDB_PAY)
					inner join dbo.ACTORROLE ar_payer on (ar_payer.IDA = b_payer.IDA_INVOICEDOFFICE) and (ar_payer.IDROLEACTOR = 'INVOICINGOFFICE')
          
					/* Check Entity of Receiver (see also where) */
          
					left outer join dbo.BOOK b_receiver on (b_receiver.IDB=e.IDB_REC) and (b_receiver.IDA_ENTITY=@ENTITY)
          
					/* Check if date is EOM */
					where dateadd(day, -day(dateadd(MONTH,1,@DATE1)), dateadd(MONTH,1,@DATE1))=@DATE1
					and (e.IDSTACTIVATION='REGULAR')
					and ( (isnull(b_receiver.IDA_ENTITY,e.IDA_REC)=@ENTITY) or (isnull(b_payer.IDA_ENTITY,e.IDA_PAY)=@ENTITY))

					/* ---------------------------------------------------------------- */
					except
					/* ---------------------------------------------------------------- */
          
					/* EventSource: Fees already invoiced on a valid invoice  */
					select e_inv.IDE_SOURCE, ec.IDEC
					from dbo.TRADE t_inv
					inner join dbo.INSTRUMENT i_inv on (i_inv.IDI = t_inv.IDI)
					inner join dbo.PRODUCT p_inv on (p_inv.IDP = i_inv.IDP) and (p_inv.GPRODUCT = 'ADM')
					inner join dbo.EVENT e_inv on (e_inv.IDT = t_inv.IDT) 
					inner join dbo.EVENTCLASS ec on (ec.IDE = e_inv.IDE_SOURCE) and (ec.EVENTCLASS = 'INV') and 
																					(ec.DTEVENT >= dateadd(MONTH,-3,@DATE1)) and (ec.DTEVENT <= @DATE1) 
					where t_inv.DTTRADE >= dateadd(MONTH,-4,@DATE1) and (t_inv.IDSTENVIRONMENT = 'REGULAR') and (e_inv.IDE_SOURCE is not null)
				) e_candidate
        
				inner join dbo.EVENT ev on (ev.IDE = e_candidate.IDE)
				inner join dbo.EVENTCLASS ec on (ec.IDEC = e_candidate.IDEC)
        
				/* Invoiced Office of Payer */
        
				inner join dbo.BOOK b_payer on (b_payer.IDB = ev.IDB_PAY)
				inner join dbo.ACTORROLE ar_payer on (ar_payer.IDA = b_payer.IDA_INVOICEDOFFICE) and (ar_payer.IDROLEACTOR = 'INVOICINGOFFICE')
        
				/* Trade */
        
				inner join dbo.TRADE t on (t.IDT = ev.IDT)
				%%SR:TRADE_JOIN%%(t.IDT, t)

        inner join dbo.INSTRUMENT i on (i.IDI = t.IDI)
				inner join dbo.PRODUCT p on (p.IDP = i.IDP)
        left outer join dbo.VW_MARKET_IDENTIFIER mk on (mk.IDM = t.IDM)        
        
				/* Groupe Instruments */
				left outer join dbo.VW_GINSTRROLE ig on (ig.IDI = t.IDI) and (ig.IDROLEGINSTR = 'INVOICING') and (ig.IDA = ar_payer.IDA)
        
				/* Groupe Contract */
		    left outer join dbo.VW_CONTRACT_INVOICE ci on (ci.IDASSET = t.IDASSET) and (ci.ASSETCATEGORY = t.ASSETCATEGORY)
		    left outer join dbo.VW_CONTRACTG_INVOICE cg on (cg.IDASSET = t.IDASSET) and (cg.ASSETCATEGORY = t.ASSETCATEGORY) and (cg.IDA = ar_payer.IDA)
        
				/* Groupe Market */
				left outer join dbo.VW_GMARKETROLE mg on (mg.IDM = t.IDM) and (mg.IDROLEGMARKET = 'INVOICING') and (mg.IDA = ar_payer.IDA)
        
				/* BookG */
				left outer join dbo.VW_GBOOKROLE bg_payer on (bg_payer.IDB = ev.IDB_PAY) and (bg_payer.IDROLEGBOOK = 'INVOICING') and (bg_payer.IDA = ar_payer.IDA)
        
       
				/* Restriction */
				where (%%SR:TRADE_WHERE_PREDICATE%%)
        ]]>
      </Command>
    </SQLSelect>

    <Column>
      <ColumnName>IDA_INVOICED</ColumnName>
      <Ressource>IDA_INVOICED</Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <GridWidth>-30</GridWidth>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <!-- AliasTableName>acinvoiced</AliasTableName -->
        <AliasTableName>a_invoiced</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDA_INVOICED</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>

    <Column>
      <ColumnName>IDT</ColumnName>
      <Ressource>IDT</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>true</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>true</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>IDENTIFIER</ColumnName>
      <Ressource>IDENTIFIER</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <GridWidth>-30</GridWidth>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy order="A_INVOICED_IDENTIFIER, A_PAYER_IDENTIFIER, UNIT, IDENTIFIER, IDE">true</IsOrderBy>
      <IsHyperLink linktype="column" type="IDT" data="IDT">true</IsHyperLink>
   </Column>
    <Column>
      <ColumnName>IDM</ColumnName>
      <Ressource>IDM</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>VW_MARKET_IDENTIFIER</TableName>
        <AliasTableName>mk</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDM</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>SHORT_ACRONYM</ColumnName>
          <Ressource>IDM_SHORT_ACRONYM</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>

    <!--<Column>
      <ColumnName>IDXC</ColumnName>
      <Ressource>IDDC</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>DERIVATIVECONTRACT</TableName>
        <ColumnRelation>
          <ColumnName>IDDC</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>IDDC</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>-->

    <Column>
      <ColumnName>CONTRACT_IDENTIFIER</ColumnName>
      <Ressource>Contract_Title</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <GridWidth>-30</GridWidth>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>true</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

    <Column>
      <ColumnName>IDI</ColumnName>
      <Ressource>IDI</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>INSTRUMENT</TableName>
        <AliasTableName>ti</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDI</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>Instrument</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTTRADE</ColumnName>
      <Ressource>DTTRADE</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>DTEVENT</ColumnName>
      <Ressource>DTEVENT</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>EVENTCODE</ColumnName>
      <Ressource>EventCode</Ressource>
      <DataType>string</DataType>
      <Length>3</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>EVENTTYPE</ColumnName>
      <Ressource>EVENTTYPE</Ressource>
      <DataType>string</DataType>
      <GridWidth>30</GridWidth>
      <Length>3</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>VALORISATION</ColumnName>
      <Ressource>Amount</Ressource>
      <DataType>decimal</DataType>
      <Length>26</Length>
      <Scale>9</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    <Column>
      <ColumnName>UNIT</ColumnName>
      <Ressource>IDC_FEE</Ressource>
      <DataType>string</DataType>
      <Length>3</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>
    
    <Column>
      <ColumnName>IDA_PAY</ColumnName>
      <Ressource>EventPayer</Ressource>
      <DataType>int</DataType>
      <GridWidth>-30</GridWidth>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>a_payer</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>EventPayer</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDB_PAY</ColumnName>
      <Ressource></Ressource>
      <DataType>int</DataType>
      <Nowrap>true</Nowrap>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>BOOK</TableName>
        <AliasTableName>b_payer</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDB</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource></Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource></Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>
    
    <Column>
      <ColumnName>IDA_REC</ColumnName>
      <Ressource>EventReceiver</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>ac2</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource>EventReceiver</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>DISPLAYNAME</Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
        <AutoComplete enabled="true"/>
      </Relation>
    </Column>
    <Column>
      <ColumnName>IDB_REC</ColumnName>
      <Ressource></Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation>
        <TableName>BOOK</TableName>
        <AliasTableName>bk2</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDB</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>IDENTIFIER</ColumnName>
          <Ressource></Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
        <ColumnLabel>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource></Ressource>
          <DataType>string</DataType>
        </ColumnLabel>
      </Relation>
    </Column>
    <Column>
      <ColumnName>GPRODUCT</ColumnName>
      <Ressource>GPRODUCT</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>false</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
      <Relation/>
    </Column>

    <Column>
      <ColumnName>IDE</ColumnName>
      <Ressource>IDE</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsHideInCriteria>true</IsHideInCriteria>
      <IsDataKeyField>false</IsDataKeyField>
      <IsKeyField>false</IsKeyField>
      <IsForeignKeyField>true</IsForeignKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <IsOrderBy>false</IsOrderBy>
    </Column>

  </Referential>
</Referentials>
