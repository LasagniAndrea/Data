<?xml version="1.0" encoding="utf-8" ?>
<Referentials>
  <Referential>
    <!--  
    RD 20220617 [26052] Add column EXTLATTRB
    CC/PL 20170922 [23429] Tips ACTOR/ALGO restrict
    CC/PL 20170918 UPD MPD [23429] New repository
    -->
    <TableName>ACTOR</TableName>
    <Ressource>ALGORITHM</Ressource>

    <RoleTableName columnbyrow="2">ACTORROLE</RoleTableName>
    
    <ColumnByRow>3</ColumnByRow>
    <Create>true</Create>
    <Modify>true</Modify>
    <Remove>true</Remove>
    <Image></Image>

    <SQLJoin>inner join dbo.ACTOR algo on (algo.IDA = tblmain.IDA) and (algo.ALGOTYPE is not null)</SQLJoin>

    <SQLWhere>
      <!-- USER non admin peut accéder aux 'algorithms', soit aux acteurs :                             
            non affectés à un profil (ou modèle), créés ou modifiés par lui-même
            accessibles par application des profils rattachés à lui ou à sa hierarchie (ISENABLED=true) 
            dits publics, ACTEUR.ISENABLED=true                            
      -->
      <ConditionSystem>SESSIONRESTRICT</ConditionSystem>
      <SQLJoin>left outer join dbo.SESSIONRESTRICT sr on sr.ID=tblmain.IDA and sr.CLASS='ACTOR' and sr.SESSIONID='%%SESSIONID%%'</SQLJoin>
      <SQLWhere>
        <![CDATA[
        (
          (sr.ID is not null) 
          or
          (
            (not exists(select 1 from dbo.ACTORMODEL where IDA=tblmain.IDA)) 
            and
            ((tblmain.IDAINS=%%ID_USER%% And tblmain.IDAUPD is null) Or tblmain.IDAUPD=%%ID_USER%%)
          )
        )
        ]]>
      </SQLWhere>
    </SQLWhere>

    <Column>
      <ColumnName>IDA</ColumnName>
      <Ressource>IDA</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>true</IsDataKeyField>
      <IsIdentity>true</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <html_BLOCK title="Characteristics" columnbyrow="3" ></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>ISENABLED</ColumnName>
      <Ressource>ISENABLEDPUBLIC</Ressource>
      <DataType>bool</DataType>
      <Colspan>0</Colspan>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <Relation/>
      <Information>
        <Type>information</Type>
        <LabelMessage>Msg_ISENABLEDPUBLIC</LabelMessage>
      </Information>
    </Column>
    <Column>
      <ColumnName>IDENTIFIER</ColumnName>
      <Ressource>IDENTIFIER</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <RegularExpression>RegexStringAlphaNum</RegularExpression>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsKeyField>true</IsKeyField>
      <IsUpdatable>true</IsUpdatable>
      <JavaScript>
        <Script attribut="onblur" name="EFS_Copy" control="DISPLAYNAME" condition="new" ></Script>
      </JavaScript>
      <html_HR size="3"/>
    </Column>
    <Column>
      <ColumnName>DISPLAYNAME</ColumnName>
      <Ressource>DISPLAYNAME</Ressource>
      <DataType>string</DataType>
      <Colspan>2</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <JavaScript>
        <Script attribut="onblur" name="EFS_Copy" control="ADDRESS1" condition="new" ></Script>
      </JavaScript>
    </Column>
    <Column>
      <ColumnName>DESCRIPTION</ColumnName>
      <Ressource>DESCRIPTION</Ressource>
      <DataType>string</DataType>
      <Colspan>0</Colspan>
      <Length>128</Length>
      <Scale>0</Scale>
      <Colspan>2</Colspan>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
    <Column>
      <ColumnName>ALGOTYPE</ColumnName>
      <Ressource>ALGOTYPE</Ressource>
      <DataType>string</DataType>
      <Colspan>1</Colspan>
      <LabelWidth>40%</LabelWidth>
      <InputWidth>10%</InputWidth>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <IsResource>true</IsResource>
      <Relation>
        <DDLType>enum.[code:AlgorithmType;condition:ISENABLED=1]</DDLType>
      </Relation>
      <Information>
        <Type>information</Type>
        <URL>enum.AlgorithmType</URL>
      </Information>
      <html_BLOCK title="MiFIDIdentification_Title" columnbyrow="5" ></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>ALGOCATEGORY</ColumnName>
      <Ressource>ALGOCATEGORY</Ressource>
      <DataType>string</DataType>
      <Colspan>4</Colspan>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <IsResource>true</IsResource>
      <Relation>
        <DDLType>enum.[code:AlgorithmCategory;condition:ISENABLED=1]</DDLType>
      </Relation>
      <Information>
        <Type>information</Type>
        <URL>enum.AlgorithmCategory</URL>
      </Information>
    </Column>
    <Column>
      <ColumnName>ALGOSTATUS</ColumnName>
      <Ressource>ALGOSTATUS</Ressource>
      <DataType>string</DataType>
      <Colspan>1</Colspan>
      <LabelWidth>40%</LabelWidth>
      <InputWidth>20%</InputWidth>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <IsResource>true</IsResource>
      <Relation>
        <DDLType>enum.[code:EMIRLEIStatus;condition:(VALUE in('CERTIFIED','NOTCERTIFIED'))]</DDLType>
      </Relation>
      <html_HR title="Empty" size="1"></html_HR>
  </Column>
    <Column>
      <ColumnName>DTALGOSTATUS</ColumnName>
      <Ressource>DTALGOSTATUS</Ressource>
      <DataType>date</DataType>
      <Colspan>4</Colspan>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
    <Column>
      <ColumnName>DTENABLED</ColumnName>
      <Ressource>DTENABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <Default>
        <Value>today</Value>
      </Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <html_BLOCK title="Status" blockbyrow="2" width="25%" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>DTDISABLED</ColumnName>
      <Ressource>DTDISABLED</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression>
      </RegularExpression>
      <Default>
      </Default>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
    <Column>
      <ColumnName>IDAINS</ColumnName>
      <Ressource>IDAINS</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>false</IsUpdatable>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>insa</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>Display name</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTINS</ColumnName>
      <Ressource>DTINS</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>true</IsUpdatable>
      <Relation></Relation>
    </Column>
    <Column>
      <ColumnName>IDAUPD</ColumnName>
      <Ressource>IDAUPD</Ressource>
      <DataType>int</DataType>
      <Length>10</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>false</IsUpdatable>
      <Relation>
        <TableName>ACTOR</TableName>
        <AliasTableName>upda</AliasTableName>
        <ColumnRelation>
          <ColumnName>IDA</ColumnName>
          <DataType>int</DataType>
        </ColumnRelation>
        <ColumnSelect>
          <ColumnName>DISPLAYNAME</ColumnName>
          <Ressource>Display name</Ressource>
          <DataType>string</DataType>
        </ColumnSelect>
      </Relation>
    </Column>
    <Column>
      <ColumnName>DTUPD</ColumnName>
      <Ressource>DTUPD</Ressource>
      <DataType>date</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
    <Column>
      <ColumnName>EXTLLINK</ColumnName>
      <Ressource>EXTLLINK1</Ressource>
      <DataType>string</DataType>
      <Length>128</Length>
      <LabelWidth>10%</LabelWidth>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <html_BLOCK title="ExtlLink2_" blockbyrow="2" width="75%" columnbyrow="1"></html_BLOCK>
    </Column>
    <Column>
      <ColumnName>EXTLLINK2</ColumnName>
      <Ressource>EXTLLINK2</Ressource>
      <DataType>string</DataType>
      <Length>128</Length>
      <LabelWidth>10%</LabelWidth>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>false</IsHide>
      <IsHideInDataGrid>false</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
      <Relation></Relation>
    </Column>
    <Column>
      <ColumnName>EXTLATTRB</ColumnName>
      <Ressource>EXTLATTRB</Ressource>
      <DataType>string</DataType>
      <Length>64</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <RegularExpression></RegularExpression>
      <Default></Default>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsKeyField>false</IsKeyField>
      <IsDataKeyField>false</IsDataKeyField>
      <IsIdentity>false</IsIdentity>
      <IsUpdatable>false</IsUpdatable>
      <Relation></Relation>
      <Information></Information>
      <!--<html_HR title="Empty" size="1"></html_HR>-->
    </Column>
    <Column>
      <ColumnName>ROWATTRIBUT</ColumnName>
      <Ressource>ROWATTRIBUT</Ressource>
      <DataType>string</DataType>
      <Length>1</Length>
      <Scale>0</Scale>
      <IsMandatory>false</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
    <Column>
      <ColumnName>ROWVERSION</ColumnName>
      <Ressource>ROWVERSION</Ressource>
      <DataType>string</DataType>
      <Length>8</Length>
      <Scale>0</Scale>
      <IsMandatory>true</IsMandatory>
      <IsHide>true</IsHide>
      <IsHideInDataGrid>true</IsHideInDataGrid>
      <IsUpdatable>true</IsUpdatable>
    </Column>
  </Referential>
</Referentials>