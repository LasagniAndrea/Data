function _GetAck(){GetMessageCompleted(function(n){null!=n&&null!=n.Second&&n.Second.length>0&&GetResource("REQUESTERRESPONSE",function(t){$("#main")[0].contentWindow.OpenMainDialog(t,n.Second,n.First,"150","250","auto","400")})})}function _DisplayMessageAfterOnConnectOk(){GetMessageAfterOnConnectOk(function(n){null!=n&&null!=n.Item3&&n.Item3.length>0&&GetResource("REQUESTERRESPONSE",function(){$("#main")[0].contentWindow.OpenMainDialog(n.Item1,n.Item3,n.Item2,"150","250","auto","400")})})}function _LoadData(){const n=$("#contnr");n.removeClass("portal");LoadSummary();var t=$("input[id$='hidIsPortal']");t.attr("value")=="true"?(n.addClass("portal"),_BindEvent()):(_DisplayTrackerGroupFavorite(),_LoadTracker(),_SetTrackerAutoRefresh(!1),_ScrollEntityMarket(),_GetAck())}function _TrackerQTip(){$("#tracker *[qtip-alt]").each(function(){var t=$(this).attr("qtip-alt"),n=!1,i=!1;$(this).attr("title")&&(n=$(this).attr("title"));t==n&&(n=!1);$(this).attr("qtip-button")?(i=$(this).attr("qtip-button"),$(this).qtip({content:{attr:"qtip-alt",text:t,title:{text:n,button:i}},position:{my:"center left",at:"right center",adjust:{method:"flip shift"},viewport:$("#tabs")},show:{delay:140,solo:!0,ready:!1,target:!1,event:"click",effect:{type:"fade",length:100}},hide:{delay:0,fixed:!0,target:!1,event:"click",effect:{type:"slide",length:100}},style:{classes:"qtip-blue"}})):$(this).qtip({content:{attr:"qtip-alt",text:t,title:{text:n}},position:{my:"center left",at:"right center",adjust:{method:"flip shift"},viewport:$("#tabs")},style:{classes:"qtip-light"}});this.removeAttribute("title");this.removeAttribute("qtip-alt");this.removeAttribute("qtip-style");this.removeAttribute("qtip-button")})}function ResizeAll(){MenuResize("#"+$("div[id^=contnr] > div.active").attr("id"))}function _BindEvent(){const n=$(document);n.unbind("keydown",hdlr_keydown).bind("keydown",hdlr_keydown);n.unbind("keyup",hdlr_keyup).bind("keyup",hdlr_keyup);$("#tabs").unbind("tabsactivate",hdlr_tabs).bind("tabsactivate",hdlr_tabs);$("div[id^='accordion_']").unbind("accordionactivate",hdlr_accordion).bind("accordionactivate",hdlr_accordion);$(window).unbind("resize",hdlr_windowresize).bind("resize",hdlr_windowresize);$("#user-box").unbind("click",hdlr_mainmenuopen).bind("click",hdlr_mainmenuopen);$("#mastermenu").unbind("mouseleave",hdlr_mainmenuleave).bind("mouseleave",hdlr_mainmenuleave)}function OM(n,t){if(cntrlIsPressed)r="_blank",cntrlIsPressed=!1;else{var r="main",i=$("#main")[0];null==i&&(i=document.getElementById("main"));null!=i&&i.contentWindow.cntrlIsPressed&&(r="_blank",i.contentWindow.cntrlIsPressed=!1)}AvailableSession(function(n){n&&window.open("hyperlink.aspx?mnu="+t,r)})}function _ScrollEntityMarket(){$(document).ready(function(){$("input[id$=__ISSCROLL]").val()=="true"?$("ul[id$=entityMarket]").infiniteslide({speed:80}):$("ul[id$=entityMarket]").stop()})}function LoadSummary(){$("#summary").load("sommaire.aspx?default=1 #TblShowMenu");_DisplayActionOnConnect()}function _LoadTracker(){AvailableSession(function(n){n&&($("div[class^=qtip]").filter("[qtip]").css("display","none"),$("#tracker").empty().load("tracker.aspx?default=1 #tabs",function(){_BindEvent();_InitTracker();$("#tabs").attr("style","visibility:visible");$.unblockUI()}))})}function _InitTracker(){_SetTabs();_SetAccordion();_ActivateTrackerGroup();_DeactivatePropagationOnCpt();_DisplayMaskGroup()}function _DisplayMaskGroup(){var n,t,i;const r=$("input[id$=hidMaskGroup]");if(n=r.attr("title").split(";"),t=r.attr("value")=="all",$("a[id$=btnMaskGroup]").attr("title",t?n[0]:n[1]),typeof $!="undefined"){const n=$("a[id$=btnMaskGroup]");n.data("qtip")!=undefined&&(i=n.qtip("api"),null!=i&&i.updateContent(n.attr("alt")));$("div[id^='group_']").each(function(n,i){if(0<=i.id.indexOf("HELP"))i.style.display="block";else{var r=i.id.endsWith("_ALL");i.style.display=t?r?"block":"none":r?"none":"block"}})}}function _SetTabs(){var n=Cookies.get("Trk-activetab");null==n&&(n=2);$("#tabs").tabs({active:n,activate:function(n,t){Cookies.set("Trk-activetab",t.newTab.index(),{expires:1,sameSite:"strict"})}}).addClass("tabs-top")}function _SetAccordion(){$("div[id^=accordion_]").accordion({header:"> div > div",collapsible:!0,fillSpace:!0,icons:!1,active:!1})}function _LoadTrackerContent(n,t){-1==n.indexOf("HELP")&&0<t.newHeader.length&&AvailableSession(function(i){if(i){const i=t.newHeader.find("span[id^=lblgroup]");var r=$("input[id$='hidHisto']").attr("value");TrackerRefreshParam(function(t){if(r=t.Item3,null!=i&&1==i.length){var u=i.attr("id").split("_"),e=i.attr("status"),f=_GetAccordionActiveElement(n).next("div");null!=f&&f.load("TrackerContent.aspx?mode=GRPLOAD&group="+u[2]+"&readystate="+u[1]+"&status="+e+"&histo="+r,null,function(){_TrackerContentIsLoad()});f=null;e=null;u=null}})}})}function _TrackerContentIsLoad(){_TrackerQTip();$("li span").on("click",function(n){n.stopPropagation()})}function _GetAccordionActiveElement(n){var t=_GetAccordionActiveIndex(),i=$(n+"> div[id^=group_]").eq(t);return t=null,i.children("div").first()}function _GetAccordionActiveIndex(){var n=null;const t=$("input[id$=hidMaskGroup]");return t.attr("value")=="all"?(n=Cookies.get("TrkAll-ActiveIndex"),null==n&&(n=0)):(n=Cookies.get("TrkActiveIndex"),null==n&&(n=5)),n}function _DeactivatePropagationOnCpt(){$("a[id^=content_]").on("click",function(n){n.preventDefault();n.stopPropagation()});$("span[id^=cpt_]").on("click",function(n){n.stopPropagation()});$("span[id^=xcpt_]").on("click",function(n){n.stopPropagation()})}function _SlideContnr(n){var f="#"+n.id,t=$(n).attr("id").replace("btnSlide",""),r,u;const i=$("#contnr");i.toggleClass("close"+t);r=i.hasClass("close"+t)?"left":"right";u=i.hasClass("close"+t)?"right":"left";$(f+" i").removeClass("fa-angle-double-"+r).addClass("fa-angle-double-"+u);ResizeAll()}function _Refresh(n,t){switch(t){case"LoadTracker":_SetTrackerAutoRefresh(!1);_LoadTracker();break;default:_SetTrackerAutoRefresh(!1);_LoadTracker();_GetAck()}}function _OpenMonitoring(){ret=window.open("BusinessMonitoring2.aspx?IDMENU=OTC_VIEW_BUSINESSMONITORING","_blank")}function _OpenTrackerObserver(){ret=window.open("TrackerServiceObserver.aspx","_blank","height=560,width=900,resizable=yes,status=yes")}function _OpenTrackerParam(){ret=window.open("TrackerParam.aspx","_blank","height=750,width=1000,resizable=yes,status=yes")}function TrackerDetail(n,t,i,r,u,f,e){GetDateTrackerDetail(function(o){f=o;var s="List.aspx?Log=FULLTRACKER_L";s+="&IDMenu=OTC_VIEW_TRACKER";null!=t&&(s+="&P1="+t);s+="&TF=Tracker";null!=i&&(s+="_"+i);null!=r&&(s+="_"+r);null!=u&&(s+="_"+u);s+=n?"&isLoadData=1":"&isLoadData=0";s+="&M=4";s+="&InputMode=2";s+="&DA=";s+="[[Data name='DTHISTORY' datatype='date']]"+(null!=f?f:"null")+"[[/Data]];";s+="[[Data name='GROUPTRACKER' datatype='string']]"+(null!=i?i:"null")+"[[/Data]];";s+="[[Data name='READYSTATE' datatype='string']]"+(null!=r?r:"null")+"[[/Data]];";s+="[[Data name='STATUSTRACKER' datatype='string']]"+(null!=u?u:"null")+"[[/Data]];";s+="&SubTitle="+e;o=window.open(s)})}function _MenuToggle(n,t){1==t&&$("div[id^=contnr] > div[id^=mnu]:first-child").each(function(){$(this).attr("id")!=$("#mnu"+n).attr("id")&&$(this).removeClass("active")});$("#mnu"+n).toggleClass("active");$("#mnu"+n).hasClass("active")?$("#mnu"+n+" > span > i").toggleClass("fa-angle-right").addClass("fa-angle-down"):$("#mnu"+n+" > span > i").toggleClass("fa-angle-down").addClass("fa-angle-right");MenuResize("#mnu"+n)}function _SwitchMenuToggle(){const t=$("input[id$='hidMaskMenu']");var n=t.attr("value")=="out";t.attr("value",n?"in":"out");$("#btnMaskMnu > i").removeClass(n?"fa-list":"fa-filter").addClass(n?"fa-filter":"fa-list");_DisplayMenuToggle()}function _DisplayMenuToggle(){var n,u,i;const r=$("input[id$='hidMaskMenu']"),t=$("#btnMaskMnu");n=r.attr("value")=="out";u=r.attr("title").split(";");$("#btnMaskMnu > i").attr("title",u[n?0:1]);t.data("qtip")!=undefined&&(i=t.qtip("api"),null!=i&&i.updateContent(t).attr("alt"));$(".mask").removeClass(n?"off":"on").addClass(n?"on":"off")}function _SwitchTrackerGroupFavorite(){AvailableSession(function(n){if(n){const n=$("input[id$='hidMaskGroup']");n.attr("value",n.attr("value")=="all"?"detail":"all");_DisplayTrackerGroupFavorite();_ActivateTrackerGroup();SaveSQLCookie("MaskGroup",n.attr("value"))}})}function _DisplayTrackerGroupFavorite(){const t=$("input[id$=hidMaskGroup]");var i=t.attr("title").split(";"),n=t.attr("value")=="all";$("a[id$=btnMaskGroup] > i").removeClass(n?"fa-star":"fa-layer-group").addClass(n?"fa-layer-group":"fa-star");$("a[id$=btnMaskGroup]").attr("title",n?i[0]:i[1]);$("div[id^=group_]").each(function(t,i){if(0<=i.id.indexOf("HELP"))i.style.display="block";else{var r=i.id.endsWith("_ALL");i.style.display=n?r?"block":"none":r?"none":"block"}})}function _ActivateTrackerGroup(){var n=($("#tabs").tabs("option","active")+1).toString();$("#tabs > div:nth-of-type("+n+") > div").each(function(n,t){var i=0;i=t.id.endsWith("HELP")?Cookies.get("TrkHelp-ActiveIndex")*2:_GetAccordionActiveIndex()*2;$(t).accordion({active:i})})}function _ResizeActiveTrackerGroup(n){var t=_GetAccordionActiveElement(n).next("div");null!=t&&t.height(HeightTracker(n));t=null}function MenuResize(n){"divMnu"==$(n).parent().parent().attr("id")&&$(n+" + div").height(HeightMenu());!1==$("#contnr").hasClass("portal")&&TrackerResize()}function TrackerResize(){var n=$("div[id^='tabs_'][aria-hidden=false] > div[id^=accordion_]").attr("id"),t=_GetAccordionActiveElement("#"+n).next("div");t.height(HeightTracker(n))}function HeightMenu(){const n=$("#contnr"),t=$("div[id=divMnu]");var i=$(window).height()-(n.hasClass("closetracker")||n.hasClass("portal")?45:320),r=t.offset().top,u=t.children().length*20;return i-r-u}function HeightTracker(n){var i,t,r,u;if(n!=undefined)return i=_GetAccordionActiveIndex(),t=i==0?20:156,-1<n.indexOf("HELP")&&(t=60),r=$("#tabs > div[aria-hidden=false]").offset().top,u=$("#masterfooter").offset().top,u-r-t}function _SetTrackerAutoRefresh(n){AvailableSession(function(t){t&&TrackerRefreshParam(function(t){const i=$("a[id$=btnAutoRefresh]");i.removeAttr("disabled");$("input[id$='hidHisto']").attr("value",t.Item3);(t.Item2==0||t.Item1==!1)&&i.attr("disabled","disabled");i.hasClass("stop")&&t.Item2>0&&t.Item1?(trackerinterval=setInterval(_Refresh,t.Item2*1e3),i.removeClass("stop").addClass("start"),GetResource("StopRefresh",function(n){i.attr("title",n)})):i.hasClass("start")&&(t.Item2==0||!1==t.Item1)?(clearInterval(trackerinterval),i.removeClass("start").addClass("stop"),GetResource("StartRefresh",function(n){i.attr("title",n)})):n&&i.hasClass("start")&&t.Item2>0&&t.Item1&&(clearInterval(trackerinterval),i.removeClass("start").addClass("stop"),GetResource("StartRefresh",function(n){i.attr("title",n)}))})})}function GetMessageCompleted(n){$.ajax({url:"WebServices/TrackerWebService.asmx/GetResponseRecipient",dataType:"json",type:"POST",contentType:"application/json; charset = utf-8",success:function(t){typeof n=="function"&&n(t.d)},error:AlertAJaxError})}function GetMessageAfterOnConnectOk(n){$.ajax({url:"WebServices/CommonWebService.asmx/GetMessageAfterOnConnectOk",dataType:"json",type:"POST",contentType:"application/json; charset = utf-8",success:function(t){typeof n=="function"&&n(t.d)},error:AlertAJaxError})}function _DisplayActionOnConnect(){GetActionOnConnect(function(n){if(null!=n)switch(n){case"CHANGEPWD":window.location.href="ChangePwd.aspx?PWDAUTOMODE=1";break;case"EXPIREDPWD":window.location.href="ChangePwd.aspx?BEFOREEXP=1";break;default:_DisplayMessageAfterOnConnectOk();_DisplayMenuToggle()}})}function GetActionOnConnect(n){$.ajax({url:"WebServices/CommonWebService.asmx/GetActionOnConnect",dataType:"json",type:"POST",contentType:"application/json; charset = utf-8",success:function(t){typeof n=="function"&&n(t.d)},error:AlertAJaxError})}function TrackerRefreshParam(n){$.ajax({url:"WebServices/TrackerWebService.asmx/TrackerRefreshParam",dataType:"json",type:"POST",contentType:"application/json; charset = utf-8",success:function(t){typeof n=="function"&&n(t.d)}})}function GetDateTrackerDetail(n){$.ajax({url:"WebServices/TrackerWebService.asmx/GetDateTrackerDetail",dataType:"json",type:"POST",contentType:"application/json; charset = utf-8",success:function(t){typeof n=="function"&&n(t.d)}})}var trackerinterval,cntrlIsPressed=!1,hdlr_keydown=function(n){n.ctrlKey&&(cntrlIsPressed=!0)},hdlr_keyup=function(n){n.ctrlKey&&(cntrlIsPressed=!1)},hdlr_tabs=function(n,t){var u=$(this).tabs("option","active"),i="#"+t.newPanel.attr("id")+" > div",r=_GetAccordionActiveIndex()*2;$(i).accordion({active:r})},hdlr_accordion=function(n,t){var i="#"+$(this).attr("id"),r=$("input[id$='hidMaskGroup']");r.attr("value")=="all"?Cookies.set("TrkAll-ActiveIndex",t.newHeader.parent("div[id^=group_]").prevAll().length,{expires:1,sameSite:"strict"}):Cookies.set("TrkActiveIndex",t.newHeader.parent("div[id^=group_]").prevAll().length,{expires:1,sameSite:"strict"});_LoadTrackerContent(i,t);_ResizeActiveTrackerGroup(i)},hdlr_windowresize=function(){var n;clearTimeout(n);n=setTimeout(ResizeAll(),500)},hdlr_mainmenuopen=function(){$("#user-box-content").toggleClass("active")},hdlr_mainmenuleave=function(){$("#user-box-content").removeClass("active")};$("#main").on("load",function(){try{($(this)[0].contentDocument||$(this)[0].contentWindow).location.href}catch(n){window.document.location.href="FedAuthLogout.aspx"!=$(this).attr("src")?"fedAuthTimeout.aspx":"Default.aspx"}});